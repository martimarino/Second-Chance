Index: src/main/java/it/unipi/dii/largescale/secondchance/controller/ProfileController.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package main.java.it.unipi.dii.largescale.secondchance.controller;\r\n\r\nimport javafx.beans.value.ChangeListener;\r\nimport javafx.fxml.FXML;\r\nimport javafx.fxml.FXMLLoader;\r\nimport javafx.geometry.Insets;\r\nimport javafx.geometry.Pos;\r\nimport javafx.scene.*;\r\nimport javafx.scene.control.*;\r\nimport javafx.scene.image.Image;\r\nimport javafx.scene.image.ImageView;\r\nimport javafx.scene.layout.*;\r\nimport javafx.scene.paint.Color;\r\nimport javafx.scene.text.Text;\r\nimport javafx.stage.Stage;\r\nimport main.java.it.unipi.dii.largescale.secondchance.connection.ConnectionMongoDB;\r\nimport main.java.it.unipi.dii.largescale.secondchance.connection.ConnectionNeo4jDB;\r\nimport main.java.it.unipi.dii.largescale.secondchance.entity.Balance;\r\nimport main.java.it.unipi.dii.largescale.secondchance.entity.User;\r\nimport main.java.it.unipi.dii.largescale.secondchance.utils.Session;\r\nimport main.java.it.unipi.dii.largescale.secondchance.utils.Utility;\r\nimport org.bson.*;\r\nimport javafx.stage.StageStyle;\r\nimport java.io.FileInputStream;\r\nimport java.io.FileNotFoundException;\r\nimport java.io.IOException;\r\n\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\n\r\npublic class ProfileController extends MainController {\r\n\r\n    public GridPane userInfo;\r\n    public GridPane reviews;\r\n\r\n    public BorderPane review;\r\n    public Pane profileImage;\r\n    HBox reviewsBox;\r\n\r\n    @FXML public Pane nextReviews, prevReviews;\r\n    public Button refreshBtn;\r\n    public Label balanceText;\r\n    public ImageView imageProfile;\r\n\r\n    public ArrayList<String> follower;\r\n    public ArrayList<String> following;\r\n\r\n    private List<Document> listReviews;\r\n\r\n    @FXML public Button btnLogout;\r\n    @FXML public Button btnAddFunds;\r\n    @FXML private Text balanceValue, titleProfile;\r\n\r\n    public Button followersButton, followingButton;\r\n    public Button interestedInsertionsButton, insertionButton;\r\n\r\n    private User user;\r\n    private Session session;\r\n    private double bal;\r\n\r\n    int scrollPage;\r\n    int scrollPage2;\r\n    int nPage = 2;\r\n    String type_img;\r\n\r\n    public void initialize(){\r\n\r\n        user  = Session.getLoggedUser();\r\n        bal = Balance.balance.getCredit();\r\n        balanceValue.setText(String.format(\"%.2f\",bal) + \"€\");\r\n        type_img = \"user\";\r\n        setProfile();\r\n\r\n        System.out.println(\"USERNAME init: \" + user.getUsername());\r\n    }\r\n\r\n    public void initialize(String us) {\r\n\r\n        user = Session.getLoggedUser();\r\n\r\n        scrollPage = 0;\r\n        scrollPage2 = 0;\r\n\r\n        if(!us.equals(user.getUsername())) {\r\n\r\n            balanceValue.setVisible(false);\r\n            btnAddFunds.setDisable(true);\r\n            btnAddFunds.setVisible(false);\r\n            refreshBtn.setVisible(false);\r\n            refreshBtn.setDisable(true);\r\n            btnLogout.setDisable(true);\r\n            btnLogout.setVisible(false);\r\n            balanceText.setVisible(false);\r\n            interestedInsertionsButton.setDisable(true);\r\n            interestedInsertionsButton.setVisible(false);\r\n            insertionButton.setLayoutY(250);\r\n            insertionButton.setText(\"View insertion published\");\r\n            titleProfile.setText(\"Profile of \" + us);\r\n            titleProfile.setLayoutX(270);\r\n            titleProfile.setLayoutY(70);\r\n            profileImage.setLayoutY(20);\r\n            profileImage.setLayoutX(70);\r\n\r\n            Document userSearched = ConnectionMongoDB.connMongo.findUserByUsername(us);\r\n            user = User.fromDocument(userSearched);\r\n\r\n            setProfile();\r\n        }\r\n        System.out.println(\"USERNAME INIT: \" + user.getUsername());\r\n    }\r\n\r\n    public void setProfile(){\r\n\r\n        prevReviews.setDisable(true);\r\n        prevReviews.setVisible(false);\r\n\r\n        reviewsBox = new HBox();\r\n        reviewsBox.setSpacing(100);\r\n        review.setCenter(reviewsBox);\r\n\r\n        scrollPage = 0;\r\n\r\n        userInfo.getChildren().clear();\r\n        profileImage.getChildren().clear();\r\n\r\n        String rate = (Double.isNaN(user.getRating()))? \"No reviews\" : Double.toString(user.getRating());\r\n\r\n        Label username = new Label(user.getUsername());\r\n        Label name = new Label(user.getName());\r\n        Label email = new Label(user.getEmail());\r\n        Label country = new Label(user.getCountry());\r\n        Label city = new Label(user.getCity());\r\n        Label address = new Label(user.getAddress());\r\n        Label rating = new Label(rate);\r\n        Label usernameText = new Label(\"Username:\");\r\n        Label nameText = new Label(\"Name:\");\r\n        Label emailText = new Label(\"Email:\");\r\n        Label countryText = new Label(\"Country:\");\r\n        Label cityText = new Label(\"City:\");\r\n        Label addressText = new Label(\"Address:\");\r\n        Label ratingText = new Label(\"Rating:\");\r\n\r\n        setProfileImage();\r\n\r\n        System.out.println(\"USER:\" + username + \" \" + name +  \" \" + email +  \" \" + country +  \" \" + city +  \" \" + address + \" \"+ user.getImage());\r\n\r\n        userInfo.add(usernameText, 0, 0);\r\n        userInfo.add(nameText, 0, 1);\r\n        userInfo.add(emailText, 0, 2);\r\n        userInfo.add(countryText, 0, 3);\r\n        userInfo.add(cityText, 0, 4);\r\n        userInfo.add(addressText, 0, 5);\r\n        userInfo.add(ratingText, 0, 6);\r\n\r\n        userInfo.add(username, 1,0);\r\n        userInfo.add(name, 1, 1);\r\n        userInfo.add(email, 1, 2);\r\n        userInfo.add(country, 1, 3);\r\n        userInfo.add(city, 1, 4);\r\n        userInfo.add(address, 1, 5);\r\n        userInfo.add(rating, 1, 6);\r\n\r\n        updateUserBalance();\r\n        following = ConnectionNeo4jDB.connNeo.retrieveFollowingByUser(user.getUsername());\r\n        follower = ConnectionNeo4jDB.connNeo.retrieveFollowersByUser(user.getUsername());\r\n        listReviews = user.getReviews();\r\n\r\n        if (listReviews == null) {\r\n            nextReviews.setDisable(true);\r\n            nextReviews.setVisible(false);\r\n        } else {\r\n            if (listReviews.size() < 3) {\r\n                System.out.println(\"Reviews nulle, disattivo i bottoni\");\r\n                nextReviews.setDisable(true);\r\n                nextReviews.setVisible(false);\r\n            }\r\n            showReviews();\r\n        }\r\n    }\r\n\r\n    public void setProfileImage() {\r\n\r\n        Label label = new Label(\"Change image!\");\r\n        label.setVisible(false);\r\n\r\n        if (user.getImage().equals(\"user.png\")) {\r\n\r\n            try {\r\n                FileInputStream imageStream = new FileInputStream(\"target/classes/img/user.png\");\r\n                Image img = new Image(imageStream);\r\n                imageProfile = new ImageView();\r\n                imageProfile.setImage(img);\r\n\r\n            } catch (FileNotFoundException e) {\r\n                e.printStackTrace();\r\n            }\r\n        } else {\r\n            imageProfile = Utility.getGoodImage(user.getImage(), 100, type_img);\r\n        }\r\n\r\n        label.setTranslateX(-5);\r\n        label.setTranslateY(25);\r\n        label.setTextFill(Color.RED);\r\n        profileImage.getChildren().add(imageProfile);\r\n        profileImage.getChildren().add(label);\r\n\r\n        profileImage.setOnMouseClicked(event->{\r\n                    try {\r\n                        showAddImgProfile();\r\n                    } catch (Exception e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n        );\r\n\r\n        profileImage.hoverProperty().addListener((ChangeListener<Boolean>) (observable, oldValue, newValue) -> {\r\n            if (newValue) {\r\n                label.setVisible(true);\r\n            } else {\r\n                label.setVisible(false);\r\n            }\r\n        });\r\n    }\r\n\r\n    /* ********** FOLLOWERS/ING STATS SECTION ********** */\r\n\r\n    public void showUserFollowers() {\r\n\r\n        try( FileInputStream imageStream = new FileInputStream(\"target/classes/img/secondchance.png\") ) {\r\n\r\n            Image image = new Image(imageStream);\r\n            FXMLLoader loader = new FXMLLoader();\r\n            loader.setLocation(FollowController.class.getResource(\"/FXML/FollowPage.fxml\"));\r\n            Stage stage = new Stage(StageStyle.DECORATED);\r\n            stage.getIcons().add(image);\r\n            stage.setScene(new Scene(loader.load()));\r\n            stage.setTitle(\"Your insertions\");\r\n            FollowController controller = loader.getController();\r\n            if (follower.size() == 0) {\r\n                Utility.infoBox(\"You have not followers.\", \"Information\", \"No followers!\");\r\n                return;\r\n            }\r\n            controller.initialize(follower);\r\n            stage.show();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public void showUserFollowing() {\r\n\r\n        try( FileInputStream imageStream = new FileInputStream(\"target/classes/img/secondchance.png\") ) {\r\n\r\n            Image image = new Image(imageStream);\r\n            FXMLLoader loader = new FXMLLoader();\r\n            loader.setLocation(FollowController.class.getResource(\"/FXML/FollowPage.fxml\"));\r\n            Stage stage = new Stage(StageStyle.DECORATED);\r\n            stage.getIcons().add(image);\r\n            stage.setScene(new Scene(loader.load()));\r\n            stage.setTitle(\"Your insertions\");\r\n            FollowController controller = loader.getController();\r\n            if (following.size() == 0) {\r\n                Utility.infoBox(\"You have not following.\", \"Information\", \"No following!\");\r\n                return;\r\n            }\r\n            controller.initialize(following);\r\n            stage.show();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public void showInterestedInsertions() {\r\n\r\n        ArrayList<String> followed_post = ConnectionNeo4jDB.connNeo.retrieveFollowersByUser(user.getUsername());\r\n        StackPane secondaryLayout = new StackPane();\r\n\r\n        for (int i = 0; i < 10; i++) {\r\n\r\n            Label x = new Label(followed_post.get(i));\r\n            x.setTranslateX(10);\r\n            x.setTranslateY(-100 + i*50);\r\n            secondaryLayout.getChildren().add(x);\r\n        }\r\n\r\n        Scene secondScene = new Scene(secondaryLayout, 920, 400);\r\n\r\n        // New window (Stage)\r\n        Stage newWindow = new Stage();\r\n        newWindow.setTitle(\"Followed post\");\r\n        newWindow.setScene(secondScene);\r\n        newWindow.show();\r\n    }\r\n\r\n    /* ********** BALANCE SECTION ********** */\r\n\r\n    public void updateUserBalance() {\r\n\r\n        double new_balance = Balance.balance.getCredit();\r\n        System.out.println(\"NEW BALANCE HERE: \" + String.format(\"%.2f\",new_balance));\r\n        balanceValue.setText(String.format(\"%.2f\",new_balance) + \"€\");\r\n\r\n    }\r\n\r\n    public void addFundsShow() throws IOException {\r\n        Stage stage = new Stage();\r\n        Utility.changePage(stage, \"AddFunds\");\r\n    }\r\n\r\n    public void showInsertions() throws IOException {\r\n\r\n        try( FileInputStream imageStream = new FileInputStream(\"target/classes/img/secondchance.png\") ) {\r\n            Image image = new Image(imageStream);\r\n            FXMLLoader loader = new FXMLLoader();\r\n            loader.setLocation(InsertionListController.class.getResource(\"/FXML/InsertionList.fxml\"));\r\n            Stage stage = new Stage(StageStyle.DECORATED);\r\n            stage.getIcons().add(image);\r\n            stage.setScene(new Scene(loader.load()));\r\n            stage.setTitle(\"Your insertions\");\r\n            InsertionListController controller = loader.getController();\r\n            controller.initialize(user.getUsername());\r\n\r\n            stage.show();\r\n        }\r\n    }\r\n\r\n    public void showInsertionsLiked() throws IOException {\r\n\r\n        try( FileInputStream imageStream = new FileInputStream(\"target/classes/img/secondchance.png\") ) {\r\n            Image image = new Image(imageStream);\r\n            FXMLLoader loader = new FXMLLoader();\r\n            loader.setLocation(InsertionListLikedController.class.getResource(\"/FXML/InsertionListLiked.fxml\"));\r\n            Stage stage = new Stage(StageStyle.DECORATED);\r\n            stage.getIcons().add(image);\r\n            stage.setTitle(\"Insertions you are interested in\");\r\n            stage.setScene(new Scene(loader.load()));\r\n\r\n            InsertionListLikedController controller = loader.getController();\r\n            controller.initialize(user.getUsername());\r\n\r\n            stage.show();\r\n        }\r\n    }\r\n\r\n    public void logout() throws IOException {\r\n\r\n        session = Session.getInstance();\r\n        session.getLogoutUser();\r\n\r\n        // Closing current window\r\n        Stage stage = (Stage) btnLogout.getScene().getWindow();\r\n        stage.close();\r\n\r\n        // Open sign-in window\r\n        Stage primaryStage = new Stage();\r\n        primaryStage.setTitle(\"SecondChance\");\r\n        Utility.changePage(primaryStage, \"SignIn\");\r\n    }\r\n\r\n    public void showReviews() {\r\n        System.out.println(\"SCROLL OUT REVIEWS: \" + scrollPage);\r\n        for (int i = 0; i < nPage && scrollPage < listReviews.size(); i++) {\r\n            System.out.println(\"SCROLL IN REVIEWS: \" + scrollPage + \"i: \" + i);\r\n            addReviews();\r\n        }\r\n    }\r\n\r\n    private void addReviews() {\r\n\r\n        Label user = new Label(\"User: \" + listReviews.get(scrollPage).getString(\"reviewer\"));\r\n        user.setTextFill(Color.WHITE);\r\n        Utility.printTerminal(listReviews.toString());\r\n\r\n        Label text = new Label(listReviews.get(scrollPage).getString(\"text\"));\r\n        text.setTextFill(Color.WHITE);\r\n        Label title = new Label(\"Title: \" + listReviews.get(scrollPage).getString(\"title\"));\r\n        title.setTextFill(Color.WHITE);\r\n        Label rating = new Label(\"Rating: \" + listReviews.get(scrollPage).getInteger(\"rating\"));\r\n        rating.setTextFill(Color.WHITE);\r\n        text.setWrapText(true);\r\n\r\n        VBox feed = new VBox(user, text, title, rating);\r\n        feed.setStyle(\"-fx-background-color: white; -fx-padding: 8\");\r\n        feed.setSpacing(10);\r\n        feed.setPadding(new Insets(5, 5, 5, 5));\r\n        feed.setPrefHeight(100);\r\n        feed.setPrefWidth(300);\r\n        feed.setAlignment(Pos.CENTER);\r\n\r\n        String cssLayout =\r\n                \"-fx-border-color: rgb(102, 153, 255);\\n\" +\r\n                        \"-fx-background-color: rgb(230, 179, 255);\\n\" +\r\n                        \"-fx-background-radius: 50;\\n\" +\r\n                        \"-fx-border-radius: 50;\\n\";\r\n        feed.setStyle(cssLayout);\r\n\r\n        reviewsBox.getChildren().add(feed);\r\n\r\n        scrollPage++;\r\n    }\r\n\r\n    public void prevReviews() {\r\n        reviewsBox.getChildren().clear();\r\n        scrollPage = Utility.prevPageReviews(scrollPage, nPage, prevReviews);\r\n\r\n        if (scrollPage == 0) {\r\n            nextReviews.setDisable(false);\r\n            nextReviews.setVisible(true);\r\n        }\r\n\r\n        showReviews();\r\n    }\r\n\r\n    public void nextReviews() {\r\n        reviewsBox.getChildren().clear();\r\n        Utility.nextPage(scrollPage + nPage, (ArrayList<Document>) listReviews, nextReviews, prevReviews);\r\n\r\n        if (scrollPage == listReviews.size() - 1) {\r\n            nextReviews.setVisible(false);\r\n            nextReviews.setDisable(true);\r\n        }\r\n\r\n        showReviews();\r\n    }\r\n\r\n    public void showAddImgProfile() throws FileNotFoundException {\r\n\r\n        try (FileInputStream imageStream = new FileInputStream(\"target/classes/img/secondchance.png\")) {\r\n\r\n            Image image = new Image(imageStream);\r\n            FXMLLoader loader = new FXMLLoader();\r\n            loader.setLocation(SearchInsertionController.class.getResource(\"/FXML/UpdateProfileImage.fxml\"));\r\n            Stage stage = new Stage(StageStyle.DECORATED);\r\n            stage.getIcons().add(image);\r\n            stage.setTitle(\"Update Profile Image\");\r\n            stage.setScene(new Scene(loader.load()));\r\n            AddProfileImageController controller = loader.getController();\r\n            controller.initialize();\r\n            stage.show();\r\n\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/it/unipi/dii/largescale/secondchance/controller/ProfileController.java b/src/main/java/it/unipi/dii/largescale/secondchance/controller/ProfileController.java
--- a/src/main/java/it/unipi/dii/largescale/secondchance/controller/ProfileController.java	(revision b0d1fe2501ac7556ddd47ebd9d2e2220d1bf8ff4)
+++ b/src/main/java/it/unipi/dii/largescale/secondchance/controller/ProfileController.java	(date 1644399881625)
@@ -64,6 +64,7 @@
     int scrollPage2;
     int nPage = 2;
     String type_img;
+    boolean choice;
 
     public void initialize(){
 
@@ -71,6 +72,9 @@
         bal = Balance.balance.getCredit();
         balanceValue.setText(String.format("%.2f",bal) + "€");
         type_img = "user";
+        followersButton.setOnMouseClicked(event ->  {choice = true; showUsersList(choice);});
+        followingButton.setOnMouseClicked(event ->  {choice = false; showUsersList(choice);});
+
         setProfile();
 
         System.out.println("USERNAME init: " + user.getUsername());
@@ -95,7 +99,7 @@
             balanceText.setVisible(false);
             interestedInsertionsButton.setDisable(true);
             interestedInsertionsButton.setVisible(false);
-            insertionButton.setLayoutY(250);
+            insertionButton.setLayoutY(240);
             insertionButton.setText("View insertion published");
             titleProfile.setText("Profile of " + us);
             titleProfile.setLayoutX(270);
@@ -163,8 +167,6 @@
         userInfo.add(rating, 1, 6);
 
         updateUserBalance();
-        following = ConnectionNeo4jDB.connNeo.retrieveFollowingByUser(user.getUsername());
-        follower = ConnectionNeo4jDB.connNeo.retrieveFollowersByUser(user.getUsername());
         listReviews = user.getReviews();
 
         if (listReviews == null) {
@@ -226,7 +228,7 @@
 
     /* ********** FOLLOWERS/ING STATS SECTION ********** */
 
-    public void showUserFollowers() {
+    public void showUsersList(boolean choice) {
 
         try( FileInputStream imageStream = new FileInputStream("target/classes/img/secondchance.png") ) {
 
@@ -238,34 +240,25 @@
             stage.setScene(new Scene(loader.load()));
             stage.setTitle("Your insertions");
             FollowController controller = loader.getController();
-            if (follower.size() == 0) {
-                Utility.infoBox("You have not followers.", "Information", "No followers!");
-                return;
-            }
-            controller.initialize(follower);
-            stage.show();
-        } catch (IOException e) {
-            e.printStackTrace();
-        }
-    }
+            if(choice) //followers page
+            {
+                follower = ConnectionNeo4jDB.connNeo.retrieveFollowersByUser(user.getUsername());
+
+                if (follower.size() == 0) {
+                    Utility.infoBox("You have not followers.", "Information", "No followers!");
+                    return;
+                }
+                controller.initialize(follower);
+            }
+            else {
+                following = ConnectionNeo4jDB.connNeo.retrieveFollowingByUser(user.getUsername());
 
-    public void showUserFollowing() {
-
-        try( FileInputStream imageStream = new FileInputStream("target/classes/img/secondchance.png") ) {
-
-            Image image = new Image(imageStream);
-            FXMLLoader loader = new FXMLLoader();
-            loader.setLocation(FollowController.class.getResource("/FXML/FollowPage.fxml"));
-            Stage stage = new Stage(StageStyle.DECORATED);
-            stage.getIcons().add(image);
-            stage.setScene(new Scene(loader.load()));
-            stage.setTitle("Your insertions");
-            FollowController controller = loader.getController();
-            if (following.size() == 0) {
-                Utility.infoBox("You have not following.", "Information", "No following!");
-                return;
-            }
-            controller.initialize(following);
+                if (following.size() == 0) {
+                    Utility.infoBox("You have not following.", "Information", "No following!");
+                    return;
+                }
+                controller.initialize(following);
+            }
             stage.show();
         } catch (IOException e) {
             e.printStackTrace();
Index: target/classes/FXML/Stats.fxml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n\r\n<?import javafx.scene.control.Button?>\r\n<?import javafx.scene.control.Label?>\r\n<?import javafx.scene.control.RadioButton?>\r\n<?import javafx.scene.control.Separator?>\r\n<?import javafx.scene.control.SplitPane?>\r\n<?import javafx.scene.control.TextField?>\r\n<?import javafx.scene.control.ToggleGroup?>\r\n<?import javafx.scene.layout.AnchorPane?>\r\n<?import javafx.scene.layout.Pane?>\r\n<?import javafx.scene.text.Font?>\r\n\r\n<AnchorPane prefHeight=\"400.0\" prefWidth=\"800.0\" style=\"-fx-background-color: rgb(230, 230, 255) rgb(230, 230, 0);\" xmlns=\"http://javafx.com/javafx/17\" xmlns:fx=\"http://javafx.com/fxml/1\" fx:controller=\"main.java.it.unipi.dii.largescale.secondchance.controller.StatsController\">\r\n   <children>\r\n      <Label layoutX=\"282.0\" layoutY=\"-1.0\" prefHeight=\"29.0\" prefWidth=\"204.0\" text=\"         Stats Section\" textAlignment=\"CENTER\">\r\n         <font>\r\n            <Font size=\"24.0\" />\r\n         </font>\r\n      </Label>\r\n      <SplitPane dividerPositions=\"0.501254705144291\" layoutX=\"1.0\" layoutY=\"34.0\" prefHeight=\"464.0\" prefWidth=\"799.0\" style=\"-fx-background-color: rgb(230, 230, 255) rgb(230, 230, 255);\">\r\n        <items>\r\n          <AnchorPane minHeight=\"0.0\" minWidth=\"0.0\" prefHeight=\"160.0\" prefWidth=\"100.0\" style=\"-fx-background-color: rgb(230, 230, 255) rgb(230, 230, 255);\">\r\n               <children>\r\n                  <Label layoutX=\"147.0\" layoutY=\"17.0\" text=\"Top K Section\">\r\n                     <font>\r\n                        <Font size=\"18.0\" />\r\n                     </font>\r\n                  </Label>\r\n                  <Pane layoutY=\"41.0\" prefHeight=\"123.0\" prefWidth=\"388.0\">\r\n                     <children>\r\n                        <Label layoutX=\"15.0\" layoutY=\"26.0\" text=\"Insert the Top K number:\">\r\n                           <font>\r\n                              <Font size=\"15.0\" />\r\n                           </font>\r\n                        </Label>\r\n                        <TextField fx:id=\"boxKNumber\" layoutX=\"180.0\" layoutY=\"23.0\" prefHeight=\"26.0\" prefWidth=\"57.0\" promptText=\"K\" />\r\n                        <Separator layoutX=\"94.0\" layoutY=\"97.0\" prefWidth=\"200.0\" />\r\n                     </children>\r\n                  </Pane>\r\n                  <Pane layoutY=\"159.0\" prefHeight=\"290.0\" prefWidth=\"387.0\">\r\n                     <children>\r\n                        <Label layoutX=\"15.0\" layoutY=\"26.0\" text=\"Select the query do you want to perform:\">\r\n                           <font>\r\n                              <Font size=\"15.0\" />\r\n                           </font>\r\n                        </Label>\r\n                        <RadioButton fx:id=\"rBTopKUsers\" layoutX=\"20.0\" layoutY=\"63.0\" mnemonicParsing=\"false\" text=\"Top K Rated User (by country) \">\r\n                           <toggleGroup>\r\n                              <ToggleGroup fx:id=\"TopK\" />\r\n                           </toggleGroup>\r\n                        </RadioButton>\r\n                        <Label layoutX=\"45.0\" layoutY=\"95.0\" text=\"Please insert the country you want:\" />\r\n                        <TextField fx:id=\"txtFieldCountry\" layoutX=\"267.0\" layoutY=\"91.0\" prefHeight=\"26.0\" prefWidth=\"114.0\" promptText=\"Country\" />\r\n                        <RadioButton fx:id=\"rBTopKInterestingIns\" layoutX=\"20.0\" layoutY=\"149.0\" mnemonicParsing=\"false\" text=\"Top K Most Interesting Insertions (by category) \" toggleGroup=\"$TopK\" />\r\n                        <RadioButton fx:id=\"rBTopKViewedIns\" layoutX=\"20.0\" layoutY=\"185.0\" mnemonicParsing=\"false\" text=\"Top K Most Viewed Insertions (by category) \" toggleGroup=\"$TopK\" />\r\n                        <Label layoutX=\"45.0\" layoutY=\"215.0\" text=\"Please insert the category you want:\" />\r\n                        <TextField fx:id=\"txtFieldCategory\" layoutX=\"267.0\" layoutY=\"211.0\" prefHeight=\"26.0\" prefWidth=\"114.0\" promptText=\"Category\" />\r\n                     </children>\r\n                  </Pane>\r\n               </children>\r\n            </AnchorPane>\r\n          <AnchorPane minHeight=\"0.0\" minWidth=\"0.0\" prefHeight=\"160.0\" prefWidth=\"100.0\" style=\"-fx-background-color: rgb(230, 230, 255) rgb(230, 230, 255);\">\r\n               <children>\r\n                  <Label layoutX=\"136.0\" layoutY=\"17.0\" text=\"Most Items Stats\">\r\n                     <font>\r\n                        <Font size=\"18.0\" />\r\n                     </font>\r\n                  </Label>\r\n                  <RadioButton fx:id=\"rBUsers\" layoutX=\"27.0\" layoutY=\"113.0\" mnemonicParsing=\"false\" prefHeight=\"17.0\" prefWidth=\"181.0\" text=\"Most Active Users\" toggleGroup=\"$TopK\" />\r\n                  <RadioButton fx:id=\"rBSellers\" layoutX=\"27.0\" layoutY=\"140.0\" mnemonicParsing=\"false\" prefHeight=\"21.0\" prefWidth=\"197.0\" text=\"Most Active Sellers\" toggleGroup=\"$TopK\" />\r\n                  <Label layoutX=\"22.0\" layoutY=\"67.0\" text=\"Select the query do you want to perform:\">\r\n                     <font>\r\n                        <Font size=\"15.0\" />\r\n                     </font>\r\n                  </Label>\r\n                  <Button fx:id=\"elaboraButton\" layoutX=\"149.0\" layoutY=\"367.0\" mnemonicParsing=\"false\" onMouseClicked=\"#redirectToStatFunction\" style=\"-fx-background-color: rgb(206, 153, 255)rgb(206, 153, 255); -fx-background-radius: 50;\" text=\"Process results\" textFill=\"#fffffff0\" />\r\n               </children></AnchorPane>\r\n        </items>\r\n      </SplitPane>\r\n   </children>\r\n</AnchorPane>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/target/classes/FXML/Stats.fxml b/target/classes/FXML/Stats.fxml
--- a/target/classes/FXML/Stats.fxml	(revision b0d1fe2501ac7556ddd47ebd9d2e2220d1bf8ff4)
+++ b/target/classes/FXML/Stats.fxml	(date 1644332184900)
@@ -1,5 +1,9 @@
 <?xml version="1.0" encoding="UTF-8"?>
 
+<?import java.lang.*?>
+<?import javafx.scene.control.*?>
+<?import javafx.scene.layout.*?>
+<?import javafx.scene.text.*?>
 <?import javafx.scene.control.Button?>
 <?import javafx.scene.control.Label?>
 <?import javafx.scene.control.RadioButton?>
@@ -11,72 +15,65 @@
 <?import javafx.scene.layout.Pane?>
 <?import javafx.scene.text.Font?>
 
-<AnchorPane prefHeight="400.0" prefWidth="800.0" style="-fx-background-color: rgb(230, 230, 255) rgb(230, 230, 0);" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="main.java.it.unipi.dii.largescale.secondchance.controller.StatsController">
+<AnchorPane prefHeight="400.0" prefWidth="800.0" style="-fx-background-color: rgb(230, 230, 255) rgb(230, 230, 0);" xmlns="http://javafx.com/javafx/8" xmlns:fx="http://javafx.com/fxml/1" fx:controller="main.java.it.unipi.dii.largescale.secondchance.controller.StatsController">
    <children>
-      <Label layoutX="282.0" layoutY="-1.0" prefHeight="29.0" prefWidth="204.0" text="         Stats Section" textAlignment="CENTER">
-         <font>
-            <Font size="24.0" />
-         </font>
-      </Label>
-      <SplitPane dividerPositions="0.501254705144291" layoutX="1.0" layoutY="34.0" prefHeight="464.0" prefWidth="799.0" style="-fx-background-color: rgb(230, 230, 255) rgb(230, 230, 255);">
-        <items>
-          <AnchorPane minHeight="0.0" minWidth="0.0" prefHeight="160.0" prefWidth="100.0" style="-fx-background-color: rgb(230, 230, 255) rgb(230, 230, 255);">
-               <children>
-                  <Label layoutX="147.0" layoutY="17.0" text="Top K Section">
-                     <font>
-                        <Font size="18.0" />
-                     </font>
-                  </Label>
-                  <Pane layoutY="41.0" prefHeight="123.0" prefWidth="388.0">
-                     <children>
-                        <Label layoutX="15.0" layoutY="26.0" text="Insert the Top K number:">
-                           <font>
-                              <Font size="15.0" />
-                           </font>
-                        </Label>
-                        <TextField fx:id="boxKNumber" layoutX="180.0" layoutY="23.0" prefHeight="26.0" prefWidth="57.0" promptText="K" />
-                        <Separator layoutX="94.0" layoutY="97.0" prefWidth="200.0" />
-                     </children>
-                  </Pane>
-                  <Pane layoutY="159.0" prefHeight="290.0" prefWidth="387.0">
-                     <children>
-                        <Label layoutX="15.0" layoutY="26.0" text="Select the query do you want to perform:">
-                           <font>
-                              <Font size="15.0" />
-                           </font>
-                        </Label>
-                        <RadioButton fx:id="rBTopKUsers" layoutX="20.0" layoutY="63.0" mnemonicParsing="false" text="Top K Rated User (by country) ">
-                           <toggleGroup>
-                              <ToggleGroup fx:id="TopK" />
-                           </toggleGroup>
-                        </RadioButton>
-                        <Label layoutX="45.0" layoutY="95.0" text="Please insert the country you want:" />
-                        <TextField fx:id="txtFieldCountry" layoutX="267.0" layoutY="91.0" prefHeight="26.0" prefWidth="114.0" promptText="Country" />
-                        <RadioButton fx:id="rBTopKInterestingIns" layoutX="20.0" layoutY="149.0" mnemonicParsing="false" text="Top K Most Interesting Insertions (by category) " toggleGroup="$TopK" />
-                        <RadioButton fx:id="rBTopKViewedIns" layoutX="20.0" layoutY="185.0" mnemonicParsing="false" text="Top K Most Viewed Insertions (by category) " toggleGroup="$TopK" />
-                        <Label layoutX="45.0" layoutY="215.0" text="Please insert the category you want:" />
-                        <TextField fx:id="txtFieldCategory" layoutX="267.0" layoutY="211.0" prefHeight="26.0" prefWidth="114.0" promptText="Category" />
+      <Pane prefHeight="450.0" prefWidth="800.0">
+         <children>
+            <SplitPane prefHeight="450.0" prefWidth="800.0" style="-fx-background-color: rgb(230, 230, 255) rgb(230, 230, 255);">
+               <items>
+                  <Pane prefHeight="448.0" prefWidth="800.0">
+                     <children>
+                      <AnchorPane layoutX="403.0" layoutY="43.0" minHeight="0.0" minWidth="0.0" prefHeight="319.0" prefWidth="397.0" style="-fx-background-color: rgb(230, 230, 255) rgb(230, 230, 255);">
+                           <children>
+                              <RadioButton fx:id="followedUsers" layoutX="63.0" layoutY="122.0" mnemonicParsing="false" prefHeight="17.0" prefWidth="181.0" text="Most followed users">
+                                 <toggleGroup>
+                                    <ToggleGroup fx:id="TopK" />
+                                 </toggleGroup>
+                              </RadioButton>
+                              <RadioButton fx:id="categoryInsertion" layoutX="63.0" layoutY="149.0" mnemonicParsing="false" prefHeight="21.0" prefWidth="197.0" text="Interesting for category" toggleGroup="$TopK" />
+                              <Label layoutX="63.0" layoutY="56.0" text="Select the query do you want to perform:">
+                                 <font>
+                                    <Font size="15.0" />
+                                 </font>
+                              </Label>
+                              <RadioButton fx:id="postedCountry" layoutX="63.0" layoutY="182.0" mnemonicParsing="false" prefHeight="21.0" prefWidth="245.0" text="Number of posted insertion for country" toggleGroup="$TopK" />
+                           </children>
+                        </AnchorPane>
+                      <AnchorPane layoutY="46.0" minHeight="0.0" minWidth="0.0" prefHeight="338.0" prefWidth="416.0" style="-fx-background-color: rgb(230, 230, 255) rgb(230, 230, 255);">
+                           <children>
+                              <Label layoutX="36.0" layoutY="54.0" text="Select the query do you want to perform:">
+                                 <font>
+                                    <Font size="15.0" />
+                                 </font>
+                              </Label>
+                              <RadioButton fx:id="rBTopKUsers" layoutX="41.0" layoutY="91.0" mnemonicParsing="false" text="Top K Rated User (by country) " toggleGroup="$TopK" />
+                              <Label layoutX="66.0" layoutY="123.0" text="Please insert the country you want:" />
+                              <TextField fx:id="txtFieldCountry" layoutX="288.0" layoutY="119.0" prefHeight="26.0" prefWidth="114.0" promptText="Country" />
+                              <RadioButton fx:id="rBTopKInterestingIns" layoutX="41.0" layoutY="161.0" mnemonicParsing="false" text="Top K Most Interesting Insertions (by category) " toggleGroup="$TopK" />
+                              <RadioButton fx:id="rBTopKViewedIns" layoutX="41.0" layoutY="197.0" mnemonicParsing="false" text="Top K Most Viewed Insertions (by category) " toggleGroup="$TopK" />
+                              <Label layoutX="66.0" layoutY="227.0" text="Please insert the category you want:" />
+                              <TextField fx:id="txtFieldCategory" layoutX="288.0" layoutY="223.0" prefHeight="26.0" prefWidth="114.0" promptText="Category" />
+                              <Label layoutX="58.0" layoutY="17.0" text="Insert the Top K number:">
+                                 <font>
+                                    <Font size="15.0" />
+                                 </font>
+                              </Label>
+                              <TextField fx:id="boxKNumber" layoutX="223.0" layoutY="14.0" prefHeight="26.0" prefWidth="57.0" promptText="K" />
+                              <RadioButton fx:id="rBUsers" layoutX="42.0" layoutY="264.0" mnemonicParsing="false" prefHeight="17.0" prefWidth="181.0" text="Users with more purchase" toggleGroup="$TopK" />
+                              <RadioButton fx:id="rBSellers" layoutX="42.0" layoutY="291.0" mnemonicParsing="false" prefHeight="21.0" prefWidth="197.0" text="Users with more sold" toggleGroup="$TopK" />
+                           </children>
+                        </AnchorPane>
+                        <Button fx:id="elaboraButton" layoutX="388.0" layoutY="394.0" mnemonicParsing="false" onMouseClicked="#redirectToStatFunction" style="-fx-background-color: rgb(206, 153, 255)rgb(206, 153, 255); -fx-background-radius: 50;" text="Process results" textFill="#fffffff0" />
                      </children>
                   </Pane>
-               </children>
-            </AnchorPane>
-          <AnchorPane minHeight="0.0" minWidth="0.0" prefHeight="160.0" prefWidth="100.0" style="-fx-background-color: rgb(230, 230, 255) rgb(230, 230, 255);">
-               <children>
-                  <Label layoutX="136.0" layoutY="17.0" text="Most Items Stats">
-                     <font>
-                        <Font size="18.0" />
-                     </font>
-                  </Label>
-                  <RadioButton fx:id="rBUsers" layoutX="27.0" layoutY="113.0" mnemonicParsing="false" prefHeight="17.0" prefWidth="181.0" text="Most Active Users" toggleGroup="$TopK" />
-                  <RadioButton fx:id="rBSellers" layoutX="27.0" layoutY="140.0" mnemonicParsing="false" prefHeight="21.0" prefWidth="197.0" text="Most Active Sellers" toggleGroup="$TopK" />
-                  <Label layoutX="22.0" layoutY="67.0" text="Select the query do you want to perform:">
-                     <font>
-                        <Font size="15.0" />
-                     </font>
-                  </Label>
-                  <Button fx:id="elaboraButton" layoutX="149.0" layoutY="367.0" mnemonicParsing="false" onMouseClicked="#redirectToStatFunction" style="-fx-background-color: rgb(206, 153, 255)rgb(206, 153, 255); -fx-background-radius: 50;" text="Process results" textFill="#fffffff0" />
-               </children></AnchorPane>
-        </items>
-      </SplitPane>
+               </items>
+            </SplitPane>
+         </children>
+      </Pane>
+      <Label layoutX="282.0" layoutY="-1.0" prefHeight="29.0" prefWidth="204.0" text="         Stats Section" textAlignment="CENTER">
+         <font>
+            <Font size="24.0" />
+         </font>
+      </Label>
    </children>
 </AnchorPane>
Index: target/classes/FXML/Profile.fxml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n\r\n<?import javafx.scene.control.Button?>\r\n<?import javafx.scene.control.Label?>\r\n<?import javafx.scene.control.Separator?>\r\n<?import javafx.scene.control.SplitPane?>\r\n<?import javafx.scene.image.Image?>\r\n<?import javafx.scene.image.ImageView?>\r\n<?import javafx.scene.layout.AnchorPane?>\r\n<?import javafx.scene.layout.BorderPane?>\r\n<?import javafx.scene.layout.ColumnConstraints?>\r\n<?import javafx.scene.layout.GridPane?>\r\n<?import javafx.scene.layout.Pane?>\r\n<?import javafx.scene.layout.RowConstraints?>\r\n<?import javafx.scene.text.Font?>\r\n<?import javafx.scene.text.Text?>\r\n\r\n<AnchorPane prefHeight=\"800.0\" prefWidth=\"700.0\" style=\"-fx-background-color: rgb(230, 230, 255);\" xmlns=\"http://javafx.com/javafx/17\" xmlns:fx=\"http://javafx.com/fxml/1\" fx:controller=\"main.java.it.unipi.dii.largescale.secondchance.controller.ProfileController\">\r\n    <children>\r\n        <SplitPane orientation=\"VERTICAL\" prefHeight=\"800.0\" prefWidth=\"700.0\" style=\"-fx-background-color: rgb(0,0,0);\">\r\n            <items>\r\n                <AnchorPane minHeight=\"0.0\" minWidth=\"0.0\" prefHeight=\"800.0\" prefWidth=\"700.0\" style=\"-fx-background-color: rgb(70,130,180) rgb(70,130,180);\">\r\n                    <children>\r\n                        <Text fx:id=\"titleProfile\" fill=\"WHITE\" layoutX=\"287.0\" layoutY=\"53.0\" strokeType=\"OUTSIDE\" strokeWidth=\"0.0\" text=\"Your profile\">\r\n                            <font>\r\n                                <Font size=\"24.0\" />\r\n                            </font>\r\n                        </Text>\r\n                        <Button fx:id=\"followersButton\" layoutX=\"429.0\" layoutY=\"158.0\" mnemonicParsing=\"false\" onMouseClicked=\"#showUserFollowers\" prefHeight=\"25.0\" prefWidth=\"245.0\" style=\"-fx-background-color: rgb(197, 197, 237)rgb(197, 197, 237); -fx-background-radius: 20;\" text=\"Followers\" textFill=\"#65626b\" />\r\n                        <Button fx:id=\"followingButton\" layoutX=\"429.0\" layoutY=\"199.0\" mnemonicParsing=\"false\" onMouseClicked=\"#showUserFollowing\" prefHeight=\"25.0\" prefWidth=\"245.0\" style=\"-fx-background-color: rgb(197, 197, 237)rgb(197, 197, 237) rgb(197, 197, 237)rgb(197, 197, 237); -fx-background-radius: 30;\" text=\"Following\" textFill=\"#65626b\" />\r\n                        <Button fx:id=\"interestedInsertionsButton\" layoutX=\"429.0\" layoutY=\"238.0\" mnemonicParsing=\"false\" onMouseClicked=\"#showInsertionsLiked\" prefHeight=\"25.0\" prefWidth=\"245.0\" style=\"-fx-background-color: rgb(197, 197, 237)rgb(197, 197, 237) rgb(197, 197, 237)rgb(197, 197, 237); -fx-background-radius: 30;\" text=\"View insertion you are interested in\" textFill=\"#65626b\" />\r\n                        <Button fx:id=\"insertionButton\" layoutX=\"429.0\" layoutY=\"279.0\" mnemonicParsing=\"false\" onMouseClicked=\"#showInsertions\" prefHeight=\"25.0\" prefWidth=\"245.0\" style=\"-fx-background-color: rgb(197, 197, 237)rgb(197, 197, 237) rgb(197, 197, 237)rgb(197, 197, 237); -fx-background-radius: 30;\" text=\"View insertion you published\" textFill=\"#65626b\" />\r\n                        <GridPane fx:id=\"userInfo\" layoutX=\"85.0\" layoutY=\"147.0\" prefHeight=\"180.0\" prefWidth=\"309.0\">\r\n                            <columnConstraints>\r\n                                <ColumnConstraints hgrow=\"SOMETIMES\" maxWidth=\"174.0\" minWidth=\"10.0\" prefWidth=\"100.0\" />\r\n                                <ColumnConstraints hgrow=\"SOMETIMES\" maxWidth=\"285.0\" minWidth=\"10.0\" prefWidth=\"209.0\" />\r\n                            </columnConstraints>\r\n                            <rowConstraints>\r\n                                <RowConstraints minHeight=\"10.0\" prefHeight=\"30.0\" vgrow=\"SOMETIMES\" />\r\n                                <RowConstraints minHeight=\"10.0\" prefHeight=\"30.0\" vgrow=\"SOMETIMES\" />\r\n                                <RowConstraints minHeight=\"10.0\" prefHeight=\"30.0\" vgrow=\"SOMETIMES\" />\r\n                                <RowConstraints minHeight=\"10.0\" prefHeight=\"30.0\" vgrow=\"SOMETIMES\" />\r\n                                <RowConstraints minHeight=\"10.0\" prefHeight=\"30.0\" vgrow=\"SOMETIMES\" />\r\n                                <RowConstraints minHeight=\"10.0\" prefHeight=\"30.0\" vgrow=\"SOMETIMES\" />\r\n                            </rowConstraints>\r\n                        </GridPane>\r\n                        <Button fx:id=\"btnLogout\" layoutX=\"573.0\" layoutY=\"31.0\" mnemonicParsing=\"false\" onMouseClicked=\"#logout\" style=\"-fx-background-color: rgb(213, 128, 255)rgb(213, 128, 255); -fx-background-radius: 30;\" text=\"Logout\" textFill=\"WHITE\" />\r\n                        <Button fx:id=\"btnAddFunds\" layoutX=\"473.0\" layoutY=\"31.0\" mnemonicParsing=\"false\" onMouseClicked=\"#addFundsShow\" style=\"-fx-background-color: rgb(238, 204, 255)rgb(238, 204, 255); -fx-background-radius: 30;\" text=\"Add Funds\" textFill=\"WHITE\" />\r\n                        <Text fill=\"WHITE\" layoutX=\"320.0\" layoutY=\"423.0\" strokeType=\"OUTSIDE\" strokeWidth=\"0.0\" text=\"Reviews\">\r\n                            <font>\r\n                                <Font size=\"24.0\" />\r\n                            </font>\r\n                        </Text>\r\n                        <Separator layoutX=\"261.0\" layoutY=\"394.0\" prefWidth=\"200.0\" />\r\n                        <Pane layoutX=\"446.0\" layoutY=\"65.0\" prefHeight=\"44.0\" prefWidth=\"200.0\">\r\n                            <children>\r\n                                <Text fx:id=\"balanceValue\" layoutX=\"70.0\" layoutY=\"29.0\" strokeType=\"OUTSIDE\" strokeWidth=\"0.0\" text=\"\" wrappingWidth=\"100.0\">\r\n                                    <font>\r\n                                        <Font name=\"System Bold\" size=\"12.0\" />\r\n                                    </font></Text>\r\n                                <Label fx:id=\"balanceText\" layoutX=\"0.0\" layoutY=\"14.0\" text=\"Balance: \" textFill=\"WHITE\">\r\n                                    <font>\r\n                                        <Font size=\"15.0\" />\r\n                                    </font>\r\n                                </Label>\r\n                                <Button fx:id=\"refreshBtn\" layoutX=\"170.0\" layoutY=\"10.0\" mnemonicParsing=\"false\" onMouseClicked=\"#updateUserBalance\" style=\"-fx-background-color: rgb(220,220,220); -fx-background-radius: 30;\">\r\n                                    <graphic>\r\n                                        <ImageView fitHeight=\"16.0\" fitWidth=\"16.0\">\r\n                                            <image>\r\n                                                <Image url=\"@../img/refresh.png\" />\r\n                                            </image>\r\n                                        </ImageView>\r\n                                    </graphic>\r\n                                </Button>\r\n                            </children>\r\n                        </Pane>\r\n                        <BorderPane fx:id=\"review\" layoutX=\"10.0\" layoutY=\"470.0\" prefHeight=\"200.0\" prefWidth=\"680.0\">\r\n                            <left>\r\n                                <Pane fx:id=\"prevReviews\" onMouseClicked=\"#prevReviews\" prefHeight=\"215.0\" prefWidth=\"50.0\" BorderPane.alignment=\"CENTER\">\r\n                                    <children>\r\n                                        <ImageView fitHeight=\"50.0\" fitWidth=\"50.0\" layoutX=\"-1.0\" layoutY=\"74.0\">\r\n                                            <image>\r\n                                                <Image url=\"@../img/prev.png\" />\r\n                                            </image>\r\n                                        </ImageView>\r\n                                    </children>\r\n                                </Pane>\r\n                            </left>\r\n                            <right>\r\n                                <Pane fx:id=\"nextReviews\" onMouseClicked=\"#nextReviews\" prefHeight=\"200.0\" prefWidth=\"50.0\" BorderPane.alignment=\"CENTER\">\r\n                                    <children>\r\n                                        <ImageView fitHeight=\"50.0\" fitWidth=\"50.0\" layoutX=\"-1.0\" layoutY=\"74.0\">\r\n                                            <image>\r\n                                                <Image url=\"@../img/next.png\" />\r\n                                            </image>\r\n                                        </ImageView>\r\n                                    </children>\r\n                                </Pane>\r\n                            </right>\r\n                        </BorderPane>\r\n                        <Pane fx:id=\"profileImage\" layoutX=\"79.0\" layoutY=\"23.0\" prefHeight=\"113.0\" prefWidth=\"161.0\" style=\"-fx-border-radius: 50; -fx-background-radius: 80;\" />\r\n                    </children>\r\n                </AnchorPane>\r\n            </items>\r\n        </SplitPane>\r\n    </children>\r\n</AnchorPane>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/target/classes/FXML/Profile.fxml b/target/classes/FXML/Profile.fxml
--- a/target/classes/FXML/Profile.fxml	(revision b0d1fe2501ac7556ddd47ebd9d2e2220d1bf8ff4)
+++ b/target/classes/FXML/Profile.fxml	(date 1644335853270)
@@ -26,8 +26,8 @@
                                 <Font size="24.0" />
                             </font>
                         </Text>
-                        <Button fx:id="followersButton" layoutX="429.0" layoutY="158.0" mnemonicParsing="false" onMouseClicked="#showUserFollowers" prefHeight="25.0" prefWidth="245.0" style="-fx-background-color: rgb(197, 197, 237)rgb(197, 197, 237); -fx-background-radius: 20;" text="Followers" textFill="#65626b" />
-                        <Button fx:id="followingButton" layoutX="429.0" layoutY="199.0" mnemonicParsing="false" onMouseClicked="#showUserFollowing" prefHeight="25.0" prefWidth="245.0" style="-fx-background-color: rgb(197, 197, 237)rgb(197, 197, 237) rgb(197, 197, 237)rgb(197, 197, 237); -fx-background-radius: 30;" text="Following" textFill="#65626b" />
+                        <Button fx:id="followersButton" layoutX="429.0" layoutY="158.0" mnemonicParsing="false" prefHeight="25.0" prefWidth="245.0" style="-fx-background-color: rgb(197, 197, 237)rgb(197, 197, 237); -fx-background-radius: 20;" text="Followers" textFill="#65626b" />
+                        <Button fx:id="followingButton" layoutX="429.0" layoutY="199.0" mnemonicParsing="false" prefHeight="25.0" prefWidth="245.0" style="-fx-background-color: rgb(197, 197, 237)rgb(197, 197, 237) rgb(197, 197, 237)rgb(197, 197, 237); -fx-background-radius: 30;" text="Following" textFill="#65626b" />
                         <Button fx:id="interestedInsertionsButton" layoutX="429.0" layoutY="238.0" mnemonicParsing="false" onMouseClicked="#showInsertionsLiked" prefHeight="25.0" prefWidth="245.0" style="-fx-background-color: rgb(197, 197, 237)rgb(197, 197, 237) rgb(197, 197, 237)rgb(197, 197, 237); -fx-background-radius: 30;" text="View insertion you are interested in" textFill="#65626b" />
                         <Button fx:id="insertionButton" layoutX="429.0" layoutY="279.0" mnemonicParsing="false" onMouseClicked="#showInsertions" prefHeight="25.0" prefWidth="245.0" style="-fx-background-color: rgb(197, 197, 237)rgb(197, 197, 237) rgb(197, 197, 237)rgb(197, 197, 237); -fx-background-radius: 30;" text="View insertion you published" textFill="#65626b" />
                         <GridPane fx:id="userInfo" layoutX="85.0" layoutY="147.0" prefHeight="180.0" prefWidth="309.0">
Index: src/main/java/it/unipi/dii/largescale/secondchance/connection/ConnectionNeo4jDB.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package main.java.it.unipi.dii.largescale.secondchance.connection;\r\n\r\nimport main.java.it.unipi.dii.largescale.secondchance.entity.Insertion;\r\nimport main.java.it.unipi.dii.largescale.secondchance.entity.User;\r\nimport main.java.it.unipi.dii.largescale.secondchance.utils.Utility;\r\nimport org.bson.Document;\r\nimport org.neo4j.driver.*;\r\nimport org.neo4j.driver.Record;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport static org.neo4j.driver.Values.parameters;\r\n\r\npublic class ConnectionNeo4jDB implements AutoCloseable\r\n{\r\n    private Driver driver;\r\n    String uri = \"neo4j://127.0.0.1:7687\";\r\n    String user = \"neo4j\";\r\n    String password = \"2nd-chance\";\r\n    public static ConnectionNeo4jDB connNeo;\r\n\r\n    public void open()\r\n    {\r\n        driver = GraphDatabase.driver( uri, AuthTokens.basic( user, password ) );\r\n    }\r\n\r\n    @Override\r\n    public void close()\r\n    {\r\n        driver.close();\r\n    }\r\n\r\n    public boolean addUser(final User u)\r\n    {\r\n        this.open();\r\n        try ( Session session = driver.session() )\r\n        {\r\n            session.writeTransaction((TransactionWork<Void>) tx -> {\r\n                tx.run(\"MERGE (u:User {username: $username, country: $country})\",\r\n                        parameters(\"username\", u.getUsername(),\r\n                                \"country\", u.getCountry()));\r\n                return null;\r\n            });\r\n            return true;\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            return false;\r\n        }finally{\r\n            this.close();\r\n        }\r\n    }\r\n\r\n    public boolean addInsertion(final Insertion i)\r\n    {\r\n        this.open();\r\n        try ( Session session = driver.session() )\r\n        {\r\n            session.writeTransaction((TransactionWork<Void>) tx -> {\r\n                tx.run( \"MERGE (i:Insertion {uniq_id: $uniq_id, category: $category,\" +\r\n                                \"gender: $gender})\",\r\n                        parameters( \"uniq_id\", i.getId(), \"category\", i.getCategory(),\r\n                                \"gender\", i.getGender()));\r\n                return null;\r\n            });\r\n            this.close();\r\n            return true;\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            Utility.printTerminal(\"Cannot create new insertion node\");\r\n            return false;\r\n        }\r\n    }\r\n\r\n    public void followUser(String follower, String followed) {\r\n        this.open();\r\n        System.out.println(\"USER_FOLLOWER: \" + follower + \"USER_FOLLOWED : \" + follower);\r\n        try ( Session session = driver.session() )\r\n        {\r\n            session.writeTransaction((TransactionWork<Void>) tx -> {\r\n                tx.run( \"MATCH (u:User),(v) \" +\r\n                                \"WHERE u.username = $username1 AND v.username = $username2 \" +\r\n                                \"CREATE (u)-[:FOLLOWS]->(v)\",\r\n                        parameters( \"username1\", follower, \"username2\", followed));\r\n                return null;\r\n            });\r\n            this.close();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public void unfollowUser(String unfollower, String unfollowed) {\r\n        this.open();\r\n        try ( Session session = driver.session() )\r\n        {\r\n            session.writeTransaction((TransactionWork<Void>) tx -> {\r\n                tx.run( \"MATCH (u:User)-[rel:FOLLOWS]->(v)  \" +\r\n                                \"WHERE u.username = $username1 AND v.username = $username2 \" +\r\n                                \"DELETE rel\",\r\n                        parameters( \"username1\", unfollower, \"username2\", unfollowed));\r\n                return null;\r\n            });\r\n            this.close();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public ArrayList<String> getSuggestedUsers(String username, String country, int k) {\r\n        this.open();\r\n        ArrayList<String> suggestions = new ArrayList<>();\r\n        try (Session session = driver.session()) {\r\n\r\n            List<String> similar = session.readTransaction((TransactionWork<List<String>>) tx -> {\r\n\r\n                Result result = tx.run( \"MATCH (u:User)-[:FOLLOWS]->(m)-[:FOLLOWS]->(others) \" +\r\n\r\n                                \"WHERE u.username = $username AND u.country = $country AND others.country = $country \" +\r\n                                \"AND NOT (u)-[:FOLLOWS]->(others) \" +\r\n                                \"RETURN others.username as SuggUsers \" +\r\n                                \"LIMIT $k\",\r\n                        parameters(\"username\", username,\r\n                                \"country\", country,\r\n                                \"k\", k));\r\n                while (result.hasNext()) {\r\n                    Record r = result.next();\r\n                    suggestions.add(r.get(\"SuggUsers\").asString());\r\n                }\r\n                return suggestions;\r\n            });\r\n            Utility.printTerminal(\"NEO4j\\n\" + similar);\r\n            this.close();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n        return suggestions;\r\n    }\r\n\r\n\r\n    public ArrayList<String> getFollowedInsertions(String username, int k) {\r\n\r\n        this.open();\r\n        ArrayList<String> followed = new ArrayList<>();\r\n        try (Session session = driver.session()) {\r\n\r\n            List<String> insertions = session.readTransaction((TransactionWork<List<String>>) tx -> {\r\n\r\n                Result result = tx.run( \"MATCH (u:User)-[:FOLLOWS]->(m)-[:POSTED]->(i:Insertion) \" +\r\n                                \"WHERE u.username = $username \" +\r\n                                \"RETURN i.uniq_id as SuggIns \" +\r\n                                \"LIMIT $k\",\r\n                        parameters(\"username\", username,\r\n                                \"k\", k));\r\n\r\n                while (result.hasNext()) {\r\n                    Record r = result.next();\r\n                    System.out.println(\"SUGGINS: \" + r.get(\"SuggIns\").asString());\r\n                    followed.add(r.get(\"SuggIns\").asString());\r\n                }\r\n                return followed;\r\n            });\r\n            Utility.printTerminal(\"NEO4j\\n\" + insertions);\r\n            this.close();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n        return followed;\r\n\r\n    }\r\n\r\n    public boolean likeInsertion(String username, String insertion_id) {\r\n\r\n        this.open();\r\n        System.out.println(\"INSERTION NEO : \" + insertion_id);\r\n\r\n        try (Session session = driver.session()) {\r\n            session.writeTransaction((TransactionWork<Void>) tx -> {\r\n                tx.run(\r\n                        \"MATCH (u:User {username: $username})\" +\r\n                                \"CREATE (u)-[rel:INTERESTED]->(i: Insertion {uniq_id: $id})\", parameters(\"username\", username,\r\n                                \"id\", insertion_id));\r\n                return null;\r\n            });\r\n            return true;\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            return false;\r\n        }finally{\r\n            this.close();\r\n        }\r\n    }\r\n\r\n    public boolean dislikeInsertion(String username, String insertion_id) {\r\n\r\n        this.open();\r\n\r\n        try (Session session = driver.session()) {\r\n            session.writeTransaction((TransactionWork<Void>) tx -> {\r\n                tx.run(\r\n                        \"MATCH (u:User { username: $username})-[r:INTERESTED]->(i :Insertion { uniq_id: $id})\\n\" +\r\n                                \"DELETE r\", parameters(\"username\", username,\r\n                                \"id\", insertion_id));\r\n                return null;\r\n            });\r\n            return true;\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            return false;\r\n        }finally {\r\n            this.close();\r\n        }\r\n    }\r\n\r\n\r\n    public boolean showIfInterested(String username, String insertion_id) {\r\n\r\n        this.open();\r\n\r\n        try (Session session = driver.session()) {\r\n            Boolean relation = session.readTransaction((TransactionWork<Boolean>) tx -> {\r\n                Result result = tx.run(\"MATCH (u:User { username: $username})-[r:INTERESTED]->(i :Insertion { uniq_id: $id})\\n\" +\r\n                        \"RETURN r\", parameters(\"username\", username,\r\n                        \"id\", insertion_id));\r\n\r\n                return result.hasNext();\r\n            });\r\n            System.out.println(relation);\r\n            this.close();\r\n            return relation;\r\n        }\r\n    }\r\n\r\n    public boolean deleteInsertion(String uniq_id) {\r\n        this.open();\r\n\r\n        try (Session session = driver.session()) {\r\n            session.writeTransaction((TransactionWork<Void>) tx -> {\r\n                tx.run(\"MATCH (i:Insertion{uniq_id : $uniq_id}) DETACH DELETE i;\",\r\n                        parameters(\"uniq_id\", uniq_id));\r\n                return null;\r\n            });\r\n            return true;\r\n        }catch(Exception e)\r\n        {\r\n            return false;\r\n        }finally{\r\n            this.close();\r\n        }\r\n    }\r\n\r\n    public boolean checkIfFollows(String us1, String us2) {\r\n\r\n        this.open();\r\n        Boolean check;\r\n\r\n        try(Session session = driver.session()) {\r\n            check = session.readTransaction((TransactionWork<Boolean>) tx -> {\r\n                Result result = tx.run(\r\n                        \"MATCH (a:User {username: $username1})-[r:FOLLOWS]->(b:User {username: $username2}) \" +\r\n                                \"RETURN r\",\r\n                        parameters( \"username1\", us1,\r\n                                \"username2\", us2));\r\n\r\n                return result.hasNext();\r\n            });\r\n            this.close();\r\n            return check;\r\n        }\r\n    }\r\n\r\n    public void followUnfollowButton(String text, String us1, String us2) {\r\n\r\n        switch (text) {\r\n            case \"Follow\":\r\n                followUser(us1, us2);\r\n                break;\r\n\r\n            case \"Unfollow\":\r\n                unfollowUser(us1, us2);\r\n                break;\r\n\r\n            default:\r\n                break;\r\n        }\r\n\r\n    }\r\n\r\n    public boolean createPostedRelationship(String node1, String node2) {\r\n\r\n        this.open();\r\n        try(Session session = driver.session()) {\r\n                session.writeTransaction((TransactionWork<Void>) tx -> {\r\n                tx.run(\r\n                        \"MATCH (u:User),(i:Insertion) \" +\r\n                                \"WHERE u.username = $username AND i.uniq_id = $id \" +\r\n                                \"CREATE (u)-[:POSTED]->(i)\",\r\n                        parameters( \"username\", node1,\r\n                                \"id\", node2));\r\n                return null;\r\n            });\r\n            this.close();\r\n            return true;\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n        Utility.printTerminal(\"Cannot create POSTED relationship\");\r\n        return false;\r\n\r\n    }\r\n\r\n    /* ********** USER SOCIAL FUNCTIONALITIES ********** */\r\n\r\n    public ArrayList<String> retrieveFollowersByUser(String user) {\r\n\r\n        this.open();\r\n        ArrayList<String> followers = new ArrayList<>();\r\n\r\n        try (Session session = driver.session()) {\r\n\r\n            List<String> follow = session.readTransaction((TransactionWork<List<String>>) tx -> {\r\n                Result result = tx.run( \"MATCH (u:User) <- [r:FOLLOWS] - (u1:User) \" +\r\n                                \"WHERE u.username = $username \" +\r\n                                \"RETURN u1.username as name \",\r\n                        parameters( \"username\", user));\r\n\r\n                while(result.hasNext())\r\n                {\r\n                    Record r = result.next();\r\n                    followers.add(r.get(\"name\").asString());\r\n                }\r\n                return followers;\r\n            });\r\n            if(!follow.isEmpty())\r\n                Utility.printTerminal(follow.get(0));\r\n            this.close();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n        return followers;\r\n    }\r\n\r\n    public ArrayList<String> retrieveFollowingByUser(String user) {\r\n\r\n        this.open();\r\n        ArrayList<String> following = new ArrayList<>();\r\n\r\n        try (Session session = driver.session()) {\r\n\r\n            List<String> follow = session.readTransaction((TransactionWork<List<String>>) tx -> {\r\n                Result result = tx.run( \"MATCH (u:User) - [r:FOLLOWS] -> (u1:User) \" +\r\n                                \"WHERE u.username = $username \" +\r\n                                \"RETURN u1.username as name \",\r\n                        parameters( \"username\", user));\r\n\r\n                while(result.hasNext())\r\n                {\r\n                    Record r = result.next();\r\n                    following.add(r.get(\"name\").asString());\r\n                }\r\n                return following;\r\n            });\r\n            if(!follow.isEmpty())\r\n                Utility.printTerminal(follow.get(0));\r\n            this.close();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n        return following;\r\n    }\r\n\r\n    public ArrayList<String> retrieveFollowedInsertionByUser(String user) {\r\n\r\n        this.open();\r\n        ArrayList<String> followed_ins = new ArrayList<>();\r\n\r\n        try (Session session = driver.session()) {\r\n\r\n            List<String> follow = session.readTransaction((TransactionWork<List<String>>) tx -> {\r\n                Result result = tx.run( \"MATCH (u:User) - [r:INTERESTED] -> (i:Insertion)\" +\r\n                                \"WHERE u.username = $username \" +\r\n                                \"RETURN i.uniq_id as uniq_id\",\r\n                        parameters( \"username\", user));\r\n\r\n                while(result.hasNext())\r\n                {\r\n                    Record r = result.next();\r\n                    followed_ins.add(r.get(\"uniq_id\").asString());\r\n                }\r\n                return followed_ins;\r\n            });\r\n            if(!followed_ins.isEmpty())\r\n                Utility.printTerminal(\"*************** NEO4j FOLLOWED INSERTIONS ***************\\n\"\r\n                                        + followed_ins.get(0));\r\n            this.close();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n        return followed_ins;\r\n    }\r\n\r\n    public boolean deleteInsertionNeo4J(String id) {\r\n        this.open();\r\n\r\n        try (Session session = driver.session()) {\r\n            session.writeTransaction((TransactionWork<Void>) tx -> {\r\n                tx.run(\r\n                        \"MATCH (u:Insertion {uniq_id: $id})\" +\r\n                                \"DETACH DELETE u\", parameters(\"id\", id));\r\n                return null;\r\n            });\r\n            return true;\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            return false;\r\n        }finally{\r\n            this.close();\r\n        }\r\n    }\r\n\r\n    public ArrayList<String> findMostFollowedUsers(int k) {\r\n\r\n        this.open();\r\n        ArrayList<String> followedUsers = new ArrayList<>();\r\n\r\n        try (Session session = driver.session()) {\r\n\r\n            session.readTransaction((TransactionWork<List<String>>) tx -> {\r\n                Result result = tx.run(\"match(u:User)-[r:FOLLOWS]->(u1:User) \" +\r\n                                \"RETURN u1.username as user, COUNT(r) as counter order by counter DESC limit $k\",\r\n                        parameters(\"k\", k));\r\n\r\n                while (result.hasNext()) {\r\n                    Record r = result.next();\r\n                    String user = r.get(\"user\").asString();\r\n                    int count = r.get(\"counter\").asInt();\r\n                    String us = user + \" : \" + count;\r\n                    followedUsers.add(us);\r\n                }\r\n\r\n                return followedUsers;\r\n\r\n            });\r\n        } catch (Exception e)\r\n        {\r\n            e.printStackTrace();\r\n        }\r\n        return followedUsers;\r\n    }\r\n\r\n    public ArrayList<String> findNumberInterestingForCountry() {\r\n\r\n        this.open();\r\n        ArrayList<String> interesting = new ArrayList<>();\r\n\r\n        try (Session session = driver.session()) {\r\n\r\n            session.readTransaction((TransactionWork<List<String>>) tx -> {\r\n                Result result = tx.run(\"match(u:User)-[r:INTERESTED]->(i:Insertion) \" +\r\n                        \"RETURN DISTINCT i.category as category, count(r) AS counter\" +\r\n                        \" ORDER BY counter DESC\");\r\n\r\n                while (result.hasNext()) {\r\n                    Record r = result.next();\r\n                    String category = r.get(\"category\").asString();\r\n                    int count = r.get(\"counter\").asInt();\r\n                    String ins = category + \" : \" + count;\r\n                    interesting.add(ins);\r\n                }\r\n\r\n                return interesting;\r\n\r\n            });\r\n        } catch (Exception e)\r\n        {\r\n            e.printStackTrace();\r\n        }\r\n        return interesting;\r\n\r\n    }\r\n\r\n\r\n    public ArrayList<String> findNumberPostedInsertionForCountry() {\r\n\r\n        this.open();\r\n        ArrayList<String> posted = new ArrayList<>();\r\n\r\n        try (Session session = driver.session()) {\r\n\r\n            session.readTransaction((TransactionWork<List<String>>) tx -> {\r\n                Result result = tx.run(\"match(u:User)-[r:POSTED]->(i:Insertion) \" +\r\n                        \"RETURN DISTINCT u.country as country, count(r) AS counter\" +\r\n                        \" ORDER BY counter DESC\");\r\n\r\n                while (result.hasNext()) {\r\n                    Record r = result.next();\r\n                    String country = r.get(\"country\").asString();\r\n                    int count = r.get(\"counter\").asInt();\r\n                    String ins = country + \" : \" + count;\r\n                    posted.add(ins);\r\n                }\r\n\r\n                return posted;\r\n\r\n            });\r\n        } catch (Exception e)\r\n        {\r\n            e.printStackTrace();\r\n        }\r\n        return posted;\r\n\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/it/unipi/dii/largescale/secondchance/connection/ConnectionNeo4jDB.java b/src/main/java/it/unipi/dii/largescale/secondchance/connection/ConnectionNeo4jDB.java
--- a/src/main/java/it/unipi/dii/largescale/secondchance/connection/ConnectionNeo4jDB.java	(revision b0d1fe2501ac7556ddd47ebd9d2e2220d1bf8ff4)
+++ b/src/main/java/it/unipi/dii/largescale/secondchance/connection/ConnectionNeo4jDB.java	(date 1644336766734)
@@ -74,7 +74,7 @@
 
     public void followUser(String follower, String followed) {
         this.open();
-        System.out.println("USER_FOLLOWER: " + follower + "USER_FOLLOWED : " + follower);
+        System.out.println("USER_FOLLOWER: " + follower + "USER_FOLLOWED : " + followed);
         try ( Session session = driver.session() )
         {
             session.writeTransaction((TransactionWork<Void>) tx -> {
Index: src/main/java/it/unipi/dii/largescale/secondchance/controller/SearchInsertionController.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package main.java.it.unipi.dii.largescale.secondchance.controller;\r\n\r\nimport javafx.fxml.FXMLLoader;\r\nimport javafx.geometry.HPos;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.control.ComboBox;\r\nimport javafx.scene.control.Label;\r\nimport javafx.scene.control.TextField;\r\nimport javafx.scene.image.Image;\r\nimport javafx.scene.image.ImageView;\r\nimport javafx.scene.layout.*;\r\nimport javafx.stage.Stage;\r\nimport javafx.stage.StageStyle;\r\nimport main.java.it.unipi.dii.largescale.secondchance.connection.ConnectionMongoDB;\r\nimport main.java.it.unipi.dii.largescale.secondchance.entity.Insertion;\r\nimport main.java.it.unipi.dii.largescale.secondchance.utils.Utility;\r\nimport org.bson.Document;\r\n\r\nimport java.io.FileInputStream;\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\n\r\npublic class SearchInsertionController extends MainController{\r\n\r\n    public ComboBox<String> size;\r\n    public ComboBox<String> price;\r\n    public ComboBox<String> gender;\r\n    public ComboBox<String> status;\r\n    public ComboBox<String> category;\r\n    public ComboBox<String> color;\r\n\r\n    public TextField ins;\r\n    public BorderPane insertionFind;\r\n    public ArrayList<Document> insertionFilter;\r\n    public Pane prev, next;\r\n\r\n    private final int k = 6;        //number of elements per page\r\n    private int index;              //index of insertion to show\r\n    public HBox firstRow, secondRow;\r\n    public VBox box;\r\n    String type_img;\r\n\r\n    public void initialize(){\r\n\r\n        type_img = \"insertion\";\r\n        firstRow = new HBox(20);\r\n        secondRow = new HBox(20);\r\n        box = new VBox(20);\r\n        index = 0;\r\n\r\n        //disable buttons\r\n        prev.setDisable(true);\r\n        next.setDisable(true);\r\n        prev.setVisible(false);\r\n        next.setVisible(false);\r\n\r\n    }\r\n\r\n    public void findInsertion() {\r\n\r\n        //disable buttons\r\n        prev.setDisable(true);\r\n        next.setDisable(true);\r\n        prev.setVisible(false);\r\n        next.setVisible(false);\r\n\r\n        if (ins.getText().equals(\"\")) {  //filters case\r\n\r\n            //if at least one filter is applied\r\n            if (!(size.getValue().equals(\"size\") && price.getValue().equals(\"price\")\r\n                    && gender.getValue().equals(\"gender\") && status.getValue().equals(\"status\")\r\n                    && category.getValue().equals(\"category\") && color.getValue().equals(\"color\"))) {\r\n\r\n                //take combobox value and search\r\n                insertionFilter = ConnectionMongoDB.connMongo.findInsertionByFilters(size.getValue(), price.getValue(), gender.getValue(), status.getValue(), category.getValue(), color.getValue());\r\n                if (insertionFilter.isEmpty())\r\n                    Utility.infoBox(\"There is not an insertion with this characteristics!\", \"Advise\", \"User Advise\");\r\n            }\r\n        } else {    //search case\r\n\r\n            if(ins.getText().equals(\"admin\"))\r\n                return;\r\n\r\n            //search insertion by seller\r\n            insertionFilter = ConnectionMongoDB.connMongo.findInsertionBySeller(ins.getText());\r\n\r\n            if (insertionFilter.isEmpty())  //if no article is found try to search for brands\r\n                insertionFilter = ConnectionMongoDB.connMongo.findInsertionByBrand(ins.getText());\r\n\r\n            if(insertionFilter.isEmpty()) {\r\n                Utility.infoBox(\"No results\", \"Advise\", \"User Advise\");\r\n                return;\r\n            }\r\n\r\n            ins.setText(\"\");\r\n        }\r\n\r\n        index = 0;\r\n        showFilteredInsertions();\r\n        insertionFind.setCenter(box);\r\n\r\n        size.setValue(\"size\");\r\n        price.setValue(\"price\");\r\n        gender.setValue(\"gender\");\r\n        status.setValue(\"status\");\r\n        category.setValue(\"category\");\r\n        color.setValue(\"color\");\r\n    }\r\n\r\n    private void showFilteredInsertions() {\r\n\r\n        if (insertionFilter.size() - index > k) {       //more than k to show\r\n            next.setDisable(false);\r\n            next.setVisible(true);\r\n        }\r\n\r\n        if(index == 0)\r\n        {\r\n            prev.setDisable(true);\r\n            prev.setVisible(false);\r\n        }\r\n\r\n        firstRow.getChildren().clear();\r\n        secondRow.getChildren().clear();\r\n        box.getChildren().clear();\r\n\r\n        for (int i = 0; i < k && index < insertionFilter.size(); i++)\r\n           addFilteredInsertions(i);\r\n\r\n\r\n        box.getChildren().add(firstRow);\r\n        if(index >= k/2)\r\n            box.getChildren().add(secondRow);\r\n\r\n        insertionFind.setCenter(box);\r\n\r\n    }\r\n\r\n    private void addFilteredInsertions(int i) {\r\n\r\n        VBox vb = new VBox();\r\n        ImageView image;\r\n        String uniq_id = insertionFilter.get(index).get(\"_id\").toString();\r\n\r\n        Label seller = new Label(\"Seller: \" + insertionFilter.get(index).getString(\"seller\"));\r\n\r\n        image = Utility.getGoodImage(insertionFilter.get(index).getString(\"image_url\"), 130, type_img);\r\n\r\n        Label status = new Label(\"Status: \" + insertionFilter.get(index).getString(\"status\"));\r\n        Label price = new Label(insertionFilter.get(index).getDouble(\"price\") + \" \" + \"€\");\r\n        Label brand = new Label(\"Brand: \" + insertionFilter.get(index).getString(\"brand\"));\r\n\r\n        if(i<(k/2)) {\r\n            vb.getChildren().add(seller);\r\n            vb.getChildren().add(image);\r\n            vb.getChildren().add(status);\r\n            vb.getChildren().add(price);\r\n            vb.getChildren().add(brand);\r\n            firstRow.getChildren().add(vb);\r\n        } else {\r\n            vb.getChildren().add(seller);\r\n            vb.getChildren().add(image);\r\n            vb.getChildren().add(status);\r\n            vb.getChildren().add(price);\r\n            vb.getChildren().add(brand);\r\n            secondRow.getChildren().add(vb);\r\n        }\r\n\r\n        seller.setOnMouseClicked(event->{\r\n                    try {\r\n                        showInsertionPage(uniq_id);\r\n                        ConnectionMongoDB.connMongo.updateNumView(uniq_id);\r\n                    } catch (Exception e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n        );\r\n\r\n        image.setOnMouseClicked(event->{\r\n                    try {\r\n                        showInsertionPage(uniq_id);\r\n                        ConnectionMongoDB.connMongo.updateNumView(uniq_id);\r\n                    } catch (Exception e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n        );\r\n\r\n        GridPane.setHalignment(seller, HPos.CENTER);\r\n        GridPane.setHalignment(image, HPos.CENTER);\r\n        GridPane.setHalignment(status, HPos.CENTER);\r\n        GridPane.setHalignment(price, HPos.CENTER);\r\n        GridPane.setHalignment(brand, HPos.CENTER);\r\n\r\n        box.setStyle(\r\n                \"-fx-padding: 50;\\n\" +\r\n                        \"    -fx-hgap: 10;\\n\" +\r\n                        \"    -fx-vgap: 10;\");\r\n        index++;\r\n    }\r\n\r\n    public void PrevFilteredInsertion() {\r\n\r\n        box.getChildren().clear();\r\n        index = Utility.prevPage(index, k, prev);\r\n        if(index < insertionFilter.size())\r\n        {\r\n            next.setDisable(false);\r\n            next.setVisible(true);\r\n        }\r\n        showFilteredInsertions();\r\n        insertionFind.setCenter(box);\r\n    }\r\n\r\n    public void NextFilteredInsertion() {\r\n\r\n        box.getChildren().clear();\r\n        Utility.nextPage(index, insertionFilter, next, prev);\r\n        showFilteredInsertions();\r\n\r\n    }\r\n\r\n    public static void showInsertionPage(String uniq_id) throws IOException {       //open a page with insertion details\r\n\r\n        Insertion insertion = ConnectionMongoDB.connMongo.findInsertion(uniq_id);\r\n        if(insertion == null) {\r\n            Utility.infoBox(\"Product already purchased\", \"Purchased\", \"Already purchased\");\r\n            insertion = ConnectionMongoDB.connMongo.findInsertion(uniq_id);                   //?\r\n            return;\r\n        }\r\n\r\n        try( FileInputStream imageStream = new FileInputStream(\"target/classes/img/secondchance.png\") ) {\r\n\r\n            Image image = new Image(imageStream);\r\n            FXMLLoader loader = new FXMLLoader();\r\n            loader.setLocation(SearchInsertionController.class.getResource(\"/FXML/Insertion.fxml\"));\r\n            Stage stage = new Stage(StageStyle.DECORATED);\r\n            stage.getIcons().add(image);\r\n            stage.setTitle(\"Insertion details\");\r\n            stage.setScene(new Scene(loader.load()));\r\n            InsertionController controller = loader.getController();\r\n            controller.initialize(insertion);\r\n            stage.show();\r\n\r\n        }\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/it/unipi/dii/largescale/secondchance/controller/SearchInsertionController.java b/src/main/java/it/unipi/dii/largescale/secondchance/controller/SearchInsertionController.java
--- a/src/main/java/it/unipi/dii/largescale/secondchance/controller/SearchInsertionController.java	(revision b0d1fe2501ac7556ddd47ebd9d2e2220d1bf8ff4)
+++ b/src/main/java/it/unipi/dii/largescale/secondchance/controller/SearchInsertionController.java	(date 1644335549385)
@@ -223,9 +223,9 @@
     public static void showInsertionPage(String uniq_id) throws IOException {       //open a page with insertion details
 
         Insertion insertion = ConnectionMongoDB.connMongo.findInsertion(uniq_id);
+
         if(insertion == null) {
             Utility.infoBox("Product already purchased", "Purchased", "Already purchased");
-            insertion = ConnectionMongoDB.connMongo.findInsertion(uniq_id);                   //?
             return;
         }
 
Index: .idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"AutoImportSettings\">\r\n    <option name=\"autoReloadType\" value=\"SELECTIVE\" />\r\n  </component>\r\n  <component name=\"ChangeListManager\">\r\n    <list default=\"true\" id=\"78096fe8-9952-45af-bf90-4f98cdf0dd02\" name=\"Changes\" comment=\"fix admin functions and add of new admin functions\">\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/workspace.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/workspace.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/main/java/it/unipi/dii/largescale/secondchance/connection/ConnectionMongoDB.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/main/java/it/unipi/dii/largescale/secondchance/connection/ConnectionMongoDB.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/main/java/it/unipi/dii/largescale/secondchance/connection/ConnectionNeo4jDB.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/main/java/it/unipi/dii/largescale/secondchance/connection/ConnectionNeo4jDB.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/main/java/it/unipi/dii/largescale/secondchance/controller/StatsController.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/main/java/it/unipi/dii/largescale/secondchance/controller/StatsController.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/main/resources/FXML/Stats.fxml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/main/resources/FXML/Stats.fxml\" afterDir=\"false\" />\r\n    </list>\r\n    <list id=\"03123c90-a928-4e0a-bf69-e1d59086bd15\" name=\"Changes by adelmobrunelli\" comment=\"Changes by adelmobrunelli\" />\r\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\r\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\r\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\r\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\r\n  </component>\r\n  <component name=\"FileTemplateManagerImpl\">\r\n    <option name=\"RECENT_TEMPLATES\">\r\n      <list>\r\n        <option value=\"Class\" />\r\n      </list>\r\n    </option>\r\n  </component>\r\n  <component name=\"Git.Settings\">\r\n    <option name=\"RECENT_BRANCH_BY_REPOSITORY\">\r\n      <map>\r\n        <entry key=\"$PROJECT_DIR$\" value=\"main\" />\r\n      </map>\r\n    </option>\r\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$\" />\r\n  </component>\r\n  <component name=\"ProjectId\" id=\"24cGP07hMuydzouSsyqELUKrZS4\" />\r\n  <component name=\"ProjectLevelVcsManager\" settingsEditedManually=\"true\" />\r\n  <component name=\"ProjectViewState\">\r\n    <option name=\"hideEmptyMiddlePackages\" value=\"true\" />\r\n    <option name=\"showLibraryContents\" value=\"true\" />\r\n  </component>\r\n  <component name=\"PropertiesComponent\">\r\n    <property name=\"RunOnceActivity.OpenProjectViewOnStart\" value=\"true\" />\r\n    <property name=\"RunOnceActivity.ShowReadmeOnStart\" value=\"true\" />\r\n    <property name=\"WebServerToolWindowFactoryState\" value=\"false\" />\r\n    <property name=\"codeWithMe.voiceChat.enabledByDefault\" value=\"false\" />\r\n    <property name=\"last_opened_file_path\" value=\"$USER_HOME$/Downloads/Telegram Desktop\" />\r\n    <property name=\"node.js.detected.package.eslint\" value=\"true\" />\r\n    <property name=\"node.js.selected.package.eslint\" value=\"(autodetect)\" />\r\n    <property name=\"node.js.selected.package.tslint\" value=\"(autodetect)\" />\r\n    <property name=\"project.structure.last.edited\" value=\"Project\" />\r\n    <property name=\"project.structure.proportion\" value=\"0.0\" />\r\n    <property name=\"project.structure.side.proportion\" value=\"0.0\" />\r\n  </component>\r\n  <component name=\"RecentsManager\">\r\n    <key name=\"CopyFile.RECENT_KEYS\">\r\n      <recent name=\"C:\\Users\\matre\\Desktop\\Large-Scale-Project\\target\\classes\" />\r\n      <recent name=\"C:\\Users\\matre\\Desktop\\Large-Scale-Project\\target\\classes\\img\" />\r\n    </key>\r\n  </component>\r\n  <component name=\"RunManager\">\r\n    <configuration name=\"SecondChanceGUI\" type=\"Application\" factoryName=\"Application\" temporary=\"true\" nameIsGenerated=\"true\">\r\n      <option name=\"MAIN_CLASS_NAME\" value=\"main.java.it.unipi.dii.largescale.secondchance.SecondChanceGUI\" />\r\n      <module name=\"Large-Scale-Project\" />\r\n      <extension name=\"coverage\">\r\n        <pattern>\r\n          <option name=\"PATTERN\" value=\"main.java.it.unipi.dii.largescale.secondchance.*\" />\r\n          <option name=\"ENABLED\" value=\"true\" />\r\n        </pattern>\r\n      </extension>\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <recent_temporary>\r\n      <list>\r\n        <item itemvalue=\"Application.SecondChanceGUI\" />\r\n      </list>\r\n    </recent_temporary>\r\n  </component>\r\n  <component name=\"SpellCheckerSettings\" RuntimeDictionaries=\"0\" Folders=\"0\" CustomDictionaries=\"0\" DefaultDictionary=\"application-level\" UseSingleDictionary=\"true\" transferred=\"true\" />\r\n  <component name=\"TaskManager\">\r\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\r\n      <changelist id=\"78096fe8-9952-45af-bf90-4f98cdf0dd02\" name=\"Changes\" comment=\"\" />\r\n      <created>1643922440258</created>\r\n      <option name=\"number\" value=\"Default\" />\r\n      <option name=\"presentableId\" value=\"Default\" />\r\n      <updated>1643922440258</updated>\r\n      <workItem from=\"1643922443095\" duration=\"3073000\" />\r\n      <workItem from=\"1643983831619\" duration=\"15905000\" />\r\n      <workItem from=\"1644075264558\" duration=\"7403000\" />\r\n      <workItem from=\"1644146357420\" duration=\"406000\" />\r\n      <workItem from=\"1644147960802\" duration=\"711000\" />\r\n      <workItem from=\"1644152757678\" duration=\"123000\" />\r\n      <workItem from=\"1644162541952\" duration=\"6928000\" />\r\n      <workItem from=\"1644170803249\" duration=\"461000\" />\r\n      <workItem from=\"1644310037703\" duration=\"6467000\" />\r\n    </task>\r\n    <task id=\"LOCAL-00001\" summary=\"Fix admin function, fix other problems\">\r\n      <created>1643993961652</created>\r\n      <option name=\"number\" value=\"00001\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00001\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1643993961652</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00002\" summary=\"Changes by adelmobrunelli\">\r\n      <created>1643993973632</created>\r\n      <option name=\"number\" value=\"00002\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00002\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1643993973632</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00003\" summary=\"Fix img_profile, fix followers and following show from profile page, fix registration user\">\r\n      <created>1644003160796</created>\r\n      <option name=\"number\" value=\"00003\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00003\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1644003160796</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00004\" summary=\"Fix do orders and update and put review, error message on clicking insertion after purchase, fix sign up\">\r\n      <created>1644082904622</created>\r\n      <option name=\"number\" value=\"00004\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00004\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1644082904623</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00005\" summary=\"upadte commit\">\r\n      <created>1644152843260</created>\r\n      <option name=\"number\" value=\"00005\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00005\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1644152843260</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00006\" summary=\"fix most active user into admin, fix searchinsertion arrows\">\r\n      <created>1644170714400</created>\r\n      <option name=\"number\" value=\"00006\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00006\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1644170714400</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00007\" summary=\"New insertion with ObjectId\">\r\n      <created>1644228305719</created>\r\n      <option name=\"number\" value=\"00007\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00007\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1644228305719</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00008\" summary=\"Changes regarding new collection balance.\">\r\n      <created>1644255846996</created>\r\n      <option name=\"number\" value=\"00008\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00008\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1644255846996</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00009\" summary=\"SearchInsertionController arrows fixed.\">\r\n      <created>1644272830774</created>\r\n      <option name=\"number\" value=\"00009\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00009\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1644272830774</updated>\r\n    </task>\r\n    <option name=\"localTasksCounter\" value=\"10\" />\r\n    <servers />\r\n  </component>\r\n  <component name=\"TypeScriptGeneratedFilesManager\">\r\n    <option name=\"version\" value=\"3\" />\r\n  </component>\r\n  <component name=\"Vcs.Log.Tabs.Properties\">\r\n    <option name=\"TAB_STATES\">\r\n      <map>\r\n        <entry key=\"MAIN\">\r\n          <value>\r\n            <State>\r\n              <option name=\"FILTERS\">\r\n                <map>\r\n                  <entry key=\"branch\">\r\n                    <value>\r\n                      <list>\r\n                        <option value=\"fix\" />\r\n                      </list>\r\n                    </value>\r\n                  </entry>\r\n                </map>\r\n              </option>\r\n            </State>\r\n          </value>\r\n        </entry>\r\n      </map>\r\n    </option>\r\n    <option name=\"oldMeFiltersMigrated\" value=\"true\" />\r\n  </component>\r\n  <component name=\"VcsManagerConfiguration\">\r\n    <MESSAGE value=\"Fix admin function, fix other problems\" />\r\n    <MESSAGE value=\"Changes by adelmobrunelli\" />\r\n    <MESSAGE value=\"Fix img_profile, fix followers and following show from profile page, fix registration user\" />\r\n    <MESSAGE value=\"Fix do orders and update and put review, error message on clicking insertion after purchase, fix sign up\" />\r\n    <MESSAGE value=\"upadte commit\" />\r\n    <MESSAGE value=\"fix most active user into admin, fix searchinsertion arrows\" />\r\n    <MESSAGE value=\"Merged the two files FollowersController.java and FollowingController.java. &#10;&#10;Merged the two files FollowersPage.fxml and FollowingPage.fxml.\" />\r\n    <option name=\"LAST_COMMIT_MESSAGE\" value=\"Merged the two files FollowersController.java and FollowingController.java. &#10;&#10;Merged the two files FollowersPage.fxml and FollowingPage.fxml.\" />\r\n  </component>\r\n  <component name=\"XDebuggerManager\">\r\n    <breakpoint-manager>\r\n      <breakpoints>\r\n        <line-breakpoint enabled=\"true\" type=\"java-line\">\r\n          <url>file://$PROJECT_DIR$/src/main/java/it/unipi/dii/largescale/secondchance/connection/ConnectionMongoDB.java</url>\r\n          <line>181</line>\r\n          <option name=\"timeStamp\" value=\"1\" />\r\n        </line-breakpoint>\r\n      </breakpoints>\r\n    </breakpoint-manager>\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/workspace.xml b/.idea/workspace.xml
--- a/.idea/workspace.xml	(revision b0d1fe2501ac7556ddd47ebd9d2e2220d1bf8ff4)
+++ b/.idea/workspace.xml	(date 1644403205046)
@@ -4,12 +4,17 @@
     <option name="autoReloadType" value="SELECTIVE" />
   </component>
   <component name="ChangeListManager">
-    <list default="true" id="78096fe8-9952-45af-bf90-4f98cdf0dd02" name="Changes" comment="fix admin functions and add of new admin functions">
+    <list default="true" id="78096fe8-9952-45af-bf90-4f98cdf0dd02" name="Changes" comment="add new functions admin page">
       <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/main/java/it/unipi/dii/largescale/secondchance/connection/ConnectionMongoDB.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/java/it/unipi/dii/largescale/secondchance/connection/ConnectionMongoDB.java" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/src/main/java/it/unipi/dii/largescale/secondchance/connection/ConnectionNeo4jDB.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/java/it/unipi/dii/largescale/secondchance/connection/ConnectionNeo4jDB.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/main/java/it/unipi/dii/largescale/secondchance/controller/StatsController.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/java/it/unipi/dii/largescale/secondchance/controller/StatsController.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/main/resources/FXML/Stats.fxml" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/resources/FXML/Stats.fxml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/java/it/unipi/dii/largescale/secondchance/controller/FollowController.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/java/it/unipi/dii/largescale/secondchance/controller/FollowController.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/java/it/unipi/dii/largescale/secondchance/controller/MyOrderController.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/java/it/unipi/dii/largescale/secondchance/controller/MyOrderController.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/java/it/unipi/dii/largescale/secondchance/controller/ProfileController.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/java/it/unipi/dii/largescale/secondchance/controller/ProfileController.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/java/it/unipi/dii/largescale/secondchance/controller/SearchInsertionController.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/java/it/unipi/dii/largescale/secondchance/controller/SearchInsertionController.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/resources/FXML/FollowPage.fxml" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/resources/FXML/FollowPage.fxml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/resources/FXML/Profile.fxml" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/resources/FXML/Profile.fxml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/classes/FXML/Profile.fxml" beforeDir="false" afterPath="$PROJECT_DIR$/target/classes/FXML/Profile.fxml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/classes/FXML/Stats.fxml" beforeDir="false" afterPath="$PROJECT_DIR$/target/classes/FXML/Stats.fxml" afterDir="false" />
     </list>
     <list id="03123c90-a928-4e0a-bf69-e1d59086bd15" name="Changes by adelmobrunelli" comment="Changes by adelmobrunelli" />
     <option name="SHOW_DIALOG" value="false" />
@@ -43,7 +48,7 @@
     <property name="RunOnceActivity.ShowReadmeOnStart" value="true" />
     <property name="WebServerToolWindowFactoryState" value="false" />
     <property name="codeWithMe.voiceChat.enabledByDefault" value="false" />
-    <property name="last_opened_file_path" value="$USER_HOME$/Downloads/Telegram Desktop" />
+    <property name="last_opened_file_path" value="$PROJECT_DIR$/target/classes/FXML" />
     <property name="node.js.detected.package.eslint" value="true" />
     <property name="node.js.selected.package.eslint" value="(autodetect)" />
     <property name="node.js.selected.package.tslint" value="(autodetect)" />
@@ -53,6 +58,7 @@
   </component>
   <component name="RecentsManager">
     <key name="CopyFile.RECENT_KEYS">
+      <recent name="C:\Users\matre\Desktop\Large-Scale-Project\target\classes\FXML" />
       <recent name="C:\Users\matre\Desktop\Large-Scale-Project\target\classes" />
       <recent name="C:\Users\matre\Desktop\Large-Scale-Project\target\classes\img" />
     </key>
@@ -94,6 +100,8 @@
       <workItem from="1644162541952" duration="6928000" />
       <workItem from="1644170803249" duration="461000" />
       <workItem from="1644310037703" duration="6467000" />
+      <workItem from="1644347340303" duration="8090000" />
+      <workItem from="1644395849334" duration="7294000" />
     </task>
     <task id="LOCAL-00001" summary="Fix admin function, fix other problems">
       <created>1643993961652</created>
@@ -158,7 +166,14 @@
       <option name="project" value="LOCAL" />
       <updated>1644272830774</updated>
     </task>
-    <option name="localTasksCounter" value="10" />
+    <task id="LOCAL-00010" summary="add new functions admin page">
+      <created>1644334461819</created>
+      <option name="number" value="00010" />
+      <option name="presentableId" value="LOCAL-00010" />
+      <option name="project" value="LOCAL" />
+      <updated>1644334461819</updated>
+    </task>
+    <option name="localTasksCounter" value="11" />
     <servers />
   </component>
   <component name="TypeScriptGeneratedFilesManager">
@@ -196,14 +211,15 @@
     <MESSAGE value="upadte commit" />
     <MESSAGE value="fix most active user into admin, fix searchinsertion arrows" />
     <MESSAGE value="Merged the two files FollowersController.java and FollowingController.java. &#10;&#10;Merged the two files FollowersPage.fxml and FollowingPage.fxml." />
-    <option name="LAST_COMMIT_MESSAGE" value="Merged the two files FollowersController.java and FollowingController.java. &#10;&#10;Merged the two files FollowersPage.fxml and FollowingPage.fxml." />
+    <MESSAGE value="add new functions admin page" />
+    <option name="LAST_COMMIT_MESSAGE" value="add new functions admin page" />
   </component>
   <component name="XDebuggerManager">
     <breakpoint-manager>
       <breakpoints>
         <line-breakpoint enabled="true" type="java-line">
           <url>file://$PROJECT_DIR$/src/main/java/it/unipi/dii/largescale/secondchance/connection/ConnectionMongoDB.java</url>
-          <line>181</line>
+          <line>178</line>
           <option name="timeStamp" value="1" />
         </line-breakpoint>
       </breakpoints>
Index: src/main/java/it/unipi/dii/largescale/secondchance/controller/MyOrderController.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package main.java.it.unipi.dii.largescale.secondchance.controller;\r\n\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.control.*;\r\nimport javafx.scene.image.ImageView;\r\nimport javafx.scene.layout.*;\r\nimport javafx.stage.Stage;\r\nimport main.java.it.unipi.dii.largescale.secondchance.connection.ConnectionMongoDB;\r\nimport main.java.it.unipi.dii.largescale.secondchance.entity.Review;\r\nimport main.java.it.unipi.dii.largescale.secondchance.entity.User;\r\nimport main.java.it.unipi.dii.largescale.secondchance.utils.Session;\r\nimport main.java.it.unipi.dii.largescale.secondchance.utils.Utility;\r\nimport org.bson.Document;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.Date;\r\n\r\npublic class MyOrderController{\r\n\r\n\r\n    private static final int MAX_LENGTH = 50;\r\n    public BorderPane ordersContainer;\r\n    public ComboBox<String> comboBox;\r\n    public Pane prev;\r\n    public Pane next;\r\n\r\n    public ArrayList<Document> ordersList;\r\n    public VBox panel;\r\n    User user;\r\n\r\n    int indexPage;\r\n    int k = 6;\r\n    boolean kind;\r\n    String type_img;\r\n\r\n    public void initialize(){\r\n\r\n        type_img = \"insertion\";\r\n        //set buttons\r\n        prev.setDisable(true);\r\n        next.setDisable(true);\r\n        prev.setVisible(false);\r\n        next.setVisible(false);\r\n\r\n        k = 4;\r\n        indexPage = 1;\r\n\r\n        ordersList = new ArrayList<>();\r\n        panel = new VBox();\r\n        panel.getChildren().clear();\r\n        ordersContainer.setCenter(panel);\r\n\r\n    }\r\n\r\n    public void showOrders() {\r\n\r\n        String type = comboBox.getValue();\r\n\r\n        Session session = Session.getInstance();\r\n        user = session.getLoggedUser();\r\n\r\n        if(type.equals(\"Items purchased\"))\r\n        {\r\n            if(ordersList != null && ordersList.size() != 0) {\r\n                panel.getChildren().clear();\r\n                indexPage = 1;\r\n            }\r\n            System.out.println(\"Purchased: \" + Session.getLoggedUser().getPurchased());\r\n            ordersList = Session.getLoggedUser().getPurchased();\r\n            kind = true;\r\n            showAllOrders(true);\r\n        }\r\n        else if(type.equals(\"Items sold\"))\r\n        {\r\n            if(ordersList != null && ordersList.size() != 0) {\r\n                panel.getChildren().clear();\r\n                indexPage = 1;\r\n            }\r\n            ordersList = Session.getLoggedUser().getSold();\r\n            kind = false;\r\n            showAllOrders(false);\r\n        }\r\n\r\n        if(ordersList != null && ordersList.size() > k)\r\n        {\r\n            next.setVisible(true);\r\n            next.setDisable(false);\r\n        }\r\n    }\r\n\r\n    private void showAllOrders(boolean choice) {\r\n\r\n        if(ordersList != null && ordersList.size() != 0) {\r\n            for (int i = 0; i < k && indexPage <= ordersList.size(); i++) {\r\n                addOrder(choice);\r\n                indexPage++;\r\n            }\r\n\r\n            if (ordersList.size() < indexPage) {\r\n                next.setDisable(true);\r\n                next.setVisible(false);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    private void addOrder(boolean choice) {\r\n\r\n        HBox hbox;\r\n        HBox revbox;\r\n        VBox vbox;\r\n        Button review = new Button();\r\n        Document ins = (Document) ordersList.get(indexPage-1).get(\"insertion\");\r\n\r\n        String sel = ordersList.get(indexPage-1).getString(\"seller\");\r\n        String orderTimestamp = ordersList.get(indexPage-1).getString(\"timestamp\");\r\n        Label buyer = new Label(\"Buyer: \" + ordersList.get(indexPage-1).getString(\"buyer\"));\r\n        Label timestamp = new Label(\"Date Order: \" + ordersList.get(indexPage-1).getString(\"timestamp\"));\r\n        Label seller = new Label(\"Seller: \" + sel);\r\n        Label price = new Label(\"Price: \" + ins.getDouble(\"price\"));\r\n        Label size = new Label(\"Size: \" + ins.getString(\"size\"));\r\n        Label status = new Label(\"Status: \" + ins.getString(\"status\"));\r\n        Label category = new Label(\"Category: \" + ins.getString(\"category\"));\r\n        ImageView image = Utility.getGoodImage(ins.getString(\"image\"), 110, type_img);\r\n\r\n        if(ordersList.get(indexPage-1).getBoolean(\"reviewed\") && choice) {\r\n            review.setText(\"Already reviewed!\");\r\n            review.setDisable(true);\r\n        }\r\n        else\r\n            review.setText(\"Review now!\");\r\n\r\n        if(choice) {\r\n            vbox = new VBox(seller, timestamp, price, category, size, status);\r\n            revbox = new HBox(vbox, review);\r\n            hbox = new HBox(image, vbox, revbox);\r\n            revbox.setSpacing(1000);\r\n        }\r\n        else {\r\n            vbox = new VBox(buyer, timestamp, price, category, size, status);\r\n            hbox = new HBox(image, vbox);\r\n        }\r\n\r\n        panel.setSpacing(12);\r\n        hbox.setSpacing(80);\r\n        hbox.setStyle(\"-fx-padding: 5px; -fx-background-color: white;\");\r\n        vbox.setStyle(\"-fx-padding: 5px; -fx-font-size: 14px\");\r\n\r\n        panel.getChildren().add(hbox);\r\n\r\n        review.setOnMouseClicked(event-> {\r\n                    addReview(sel, orderTimestamp, review);\r\n                }\r\n        );\r\n    }\r\n\r\n    public void PrevOrder() {\r\n\r\n        panel.getChildren().clear();\r\n        int ind = (indexPage%(k+1)) == 0? 1 : (indexPage%(k+1));\r\n        indexPage-= (k + ind);\r\n\r\n        next.setDisable(false);\r\n        next.setVisible(true);\r\n\r\n        if(indexPage < k)\r\n        {\r\n            prev.setDisable(true);\r\n            prev.setVisible(false);\r\n        }\r\n\r\n        showAllOrders(kind);\r\n\r\n    }\r\n\r\n    public void NextOrder() {\r\n\r\n        panel.getChildren().clear();\r\n\r\n        showAllOrders(kind);\r\n\r\n        prev.setDisable(false);\r\n        prev.setVisible(true);\r\n    }\r\n\r\n    private void addReview(String seller, String timestampOrder, Button revButton) {        //panel builder\r\n\r\n        StackPane secondaryLayout = new StackPane();\r\n        TextArea txtArea = new TextArea();\r\n        TextField txtTitle = new TextField();\r\n        ComboBox<String> rating = new ComboBox();\r\n\r\n        rating.getSelectionModel().select(\"rating\");\r\n        rating.getItems().add(\"1\");\r\n        rating.getItems().add(\"2\");\r\n        rating.getItems().add(\"3\");\r\n        rating.getItems().add(\"4\");\r\n        rating.getItems().add(\"5\");\r\n\r\n        txtArea.setPrefHeight(150);\r\n        txtArea.setPrefWidth(250);\r\n\r\n        txtTitle.setPrefHeight(10);\r\n        txtTitle.setPrefWidth(100);\r\n\r\n        Button sendReview = new Button();\r\n        sendReview.setText(\"Send review\");\r\n        sendReview.setStyle(\"-fx-border-width: 50\");\r\n\r\n        txtTitle.setPromptText(\"Title review\");\r\n        txtArea.setPromptText(\"Max 150 characters\");\r\n\r\n        HBox hbox = new HBox(txtTitle, rating);\r\n        VBox vbox = new VBox(hbox, txtArea, sendReview);\r\n        hbox.setSpacing(10);\r\n        vbox.setSpacing(10);\r\n\r\n        secondaryLayout.getChildren().add(vbox);\r\n        Scene secondScene = new Scene(secondaryLayout, 400, 200);\r\n\r\n        // New window\r\n        Stage newWindow = new Stage();\r\n        newWindow.setTitle(\"Review user\");\r\n        newWindow.setScene(secondScene);\r\n        newWindow.show();\r\n\r\n        sendReview.setOnMouseClicked(event-> {\r\n\r\n            if (txtArea.getText().trim().equals(\"\") || txtTitle.getText().trim().isEmpty() || rating.getValue().equals(\"rating\")) {\r\n                Utility.infoBox(\"Insert all the data\", \"User Alert\", \"Empty fields\");\r\n                return;\r\n            }\r\n\r\n            if(txtArea.getText().length() > MAX_LENGTH)\r\n            {\r\n                Utility.infoBox(\"Review with too many characters\", \"User Alert\", \"Incorrect field\");\r\n                return;\r\n            }\r\n\r\n            sendReview(txtArea, txtTitle, sendReview, revButton, Integer.parseInt(rating.getValue()), seller, timestampOrder);\r\n        });\r\n\r\n    }\r\n\r\n    public void sendReview(TextArea txtArea, TextField txtTitle, Button sendReview, Button revButton, int rating, String seller, String timestampOrder){\r\n\r\n        SimpleDateFormat date = new SimpleDateFormat(\"dd-MM-yy HH:mm:ss\");\r\n        String timestamp = date.format(new Date());\r\n        System.out.println(\"timestamp: \" + timestamp);\r\n\r\n        Review rev = new Review( user.getUsername(), seller, txtArea.getText(), timestamp, txtTitle.getText(), rating);\r\n        Utility.printTerminal(\"REV: \" + rev);\r\n\r\n        ConnectionMongoDB.connMongo.addReview(rev);\r\n        ConnectionMongoDB.connMongo.updateSellerRating(rev.getSeller());\r\n        Document updated = setIsertionReviewed(timestampOrder);     //update local array\r\n        ConnectionMongoDB.connMongo.setInsertionReviewed(timestampOrder, updated);  //update remote array\r\n        sendReview.setDisable(true);\r\n        revButton.setText(\"Already reviewed!\");\r\n        revButton.setDisable(true);\r\n\r\n        Stage stage = (Stage) sendReview.getScene().getWindow();\r\n        stage.close();\r\n    }\r\n\r\n    private Document setIsertionReviewed(String ts) {\r\n\r\n        ArrayList<Document> purc = Session.getLoggedUser().getPurchased();\r\n\r\n        Document n = null;\r\n        for(Document d : purc)\r\n            if(d.getString(\"timestamp\").equals(ts)) {\r\n                d.replace(\"reviewed\", true);\r\n                n = d;\r\n            }\r\n\r\n        return n;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/it/unipi/dii/largescale/secondchance/controller/MyOrderController.java b/src/main/java/it/unipi/dii/largescale/secondchance/controller/MyOrderController.java
--- a/src/main/java/it/unipi/dii/largescale/secondchance/controller/MyOrderController.java	(revision b0d1fe2501ac7556ddd47ebd9d2e2220d1bf8ff4)
+++ b/src/main/java/it/unipi/dii/largescale/secondchance/controller/MyOrderController.java	(date 1644355210428)
@@ -29,7 +29,7 @@
     User user;
 
     int indexPage;
-    int k = 6;
+    int k = 6; // number of orders show into current page
     boolean kind;
     String type_img;
 
Index: src/main/resources/FXML/Profile.fxml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n\r\n<?import javafx.scene.control.Button?>\r\n<?import javafx.scene.control.Label?>\r\n<?import javafx.scene.control.Separator?>\r\n<?import javafx.scene.control.SplitPane?>\r\n<?import javafx.scene.image.Image?>\r\n<?import javafx.scene.image.ImageView?>\r\n<?import javafx.scene.layout.AnchorPane?>\r\n<?import javafx.scene.layout.BorderPane?>\r\n<?import javafx.scene.layout.ColumnConstraints?>\r\n<?import javafx.scene.layout.GridPane?>\r\n<?import javafx.scene.layout.Pane?>\r\n<?import javafx.scene.layout.RowConstraints?>\r\n<?import javafx.scene.text.Font?>\r\n<?import javafx.scene.text.Text?>\r\n\r\n<AnchorPane prefHeight=\"800.0\" prefWidth=\"700.0\" style=\"-fx-background-color: rgb(230, 230, 255);\" xmlns=\"http://javafx.com/javafx/17\" xmlns:fx=\"http://javafx.com/fxml/1\" fx:controller=\"main.java.it.unipi.dii.largescale.secondchance.controller.ProfileController\">\r\n    <children>\r\n        <SplitPane orientation=\"VERTICAL\" prefHeight=\"800.0\" prefWidth=\"700.0\" style=\"-fx-background-color: rgb(0,0,0);\">\r\n            <items>\r\n                <AnchorPane minHeight=\"0.0\" minWidth=\"0.0\" prefHeight=\"800.0\" prefWidth=\"700.0\" style=\"-fx-background-color: rgb(70,130,180) rgb(70,130,180);\">\r\n                    <children>\r\n                        <Text fx:id=\"titleProfile\" fill=\"WHITE\" layoutX=\"287.0\" layoutY=\"53.0\" strokeType=\"OUTSIDE\" strokeWidth=\"0.0\" text=\"Your profile\">\r\n                            <font>\r\n                                <Font size=\"24.0\" />\r\n                            </font>\r\n                        </Text>\r\n                        <Button fx:id=\"followersButton\" layoutX=\"429.0\" layoutY=\"158.0\" mnemonicParsing=\"false\" onMouseClicked=\"#showUserFollowers\" prefHeight=\"25.0\" prefWidth=\"245.0\" style=\"-fx-background-color: rgb(197, 197, 237)rgb(197, 197, 237); -fx-background-radius: 20;\" text=\"Followers\" textFill=\"#65626b\" />\r\n                        <Button fx:id=\"followingButton\" layoutX=\"429.0\" layoutY=\"199.0\" mnemonicParsing=\"false\" onMouseClicked=\"#showUserFollowing\" prefHeight=\"25.0\" prefWidth=\"245.0\" style=\"-fx-background-color: rgb(197, 197, 237)rgb(197, 197, 237) rgb(197, 197, 237)rgb(197, 197, 237); -fx-background-radius: 30;\" text=\"Following\" textFill=\"#65626b\" />\r\n                        <Button fx:id=\"interestedInsertionsButton\" layoutX=\"429.0\" layoutY=\"238.0\" mnemonicParsing=\"false\" onMouseClicked=\"#showInsertionsLiked\" prefHeight=\"25.0\" prefWidth=\"245.0\" style=\"-fx-background-color: rgb(197, 197, 237)rgb(197, 197, 237) rgb(197, 197, 237)rgb(197, 197, 237); -fx-background-radius: 30;\" text=\"View insertion you are interested in\" textFill=\"#65626b\" />\r\n                        <Button fx:id=\"insertionButton\" layoutX=\"429.0\" layoutY=\"279.0\" mnemonicParsing=\"false\" onMouseClicked=\"#showInsertions\" prefHeight=\"25.0\" prefWidth=\"245.0\" style=\"-fx-background-color: rgb(197, 197, 237)rgb(197, 197, 237) rgb(197, 197, 237)rgb(197, 197, 237); -fx-background-radius: 30;\" text=\"View insertion you published\" textFill=\"#65626b\" />\r\n                        <GridPane fx:id=\"userInfo\" layoutX=\"85.0\" layoutY=\"147.0\" prefHeight=\"180.0\" prefWidth=\"309.0\">\r\n                            <columnConstraints>\r\n                                <ColumnConstraints hgrow=\"SOMETIMES\" maxWidth=\"174.0\" minWidth=\"10.0\" prefWidth=\"100.0\" />\r\n                                <ColumnConstraints hgrow=\"SOMETIMES\" maxWidth=\"285.0\" minWidth=\"10.0\" prefWidth=\"209.0\" />\r\n                            </columnConstraints>\r\n                            <rowConstraints>\r\n                                <RowConstraints minHeight=\"10.0\" prefHeight=\"30.0\" vgrow=\"SOMETIMES\" />\r\n                                <RowConstraints minHeight=\"10.0\" prefHeight=\"30.0\" vgrow=\"SOMETIMES\" />\r\n                                <RowConstraints minHeight=\"10.0\" prefHeight=\"30.0\" vgrow=\"SOMETIMES\" />\r\n                                <RowConstraints minHeight=\"10.0\" prefHeight=\"30.0\" vgrow=\"SOMETIMES\" />\r\n                                <RowConstraints minHeight=\"10.0\" prefHeight=\"30.0\" vgrow=\"SOMETIMES\" />\r\n                                <RowConstraints minHeight=\"10.0\" prefHeight=\"30.0\" vgrow=\"SOMETIMES\" />\r\n                            </rowConstraints>\r\n                        </GridPane>\r\n                        <Button fx:id=\"btnLogout\" layoutX=\"573.0\" layoutY=\"31.0\" mnemonicParsing=\"false\" onMouseClicked=\"#logout\" style=\"-fx-background-color: rgb(213, 128, 255)rgb(213, 128, 255); -fx-background-radius: 30;\" text=\"Logout\" textFill=\"WHITE\" />\r\n                        <Button fx:id=\"btnAddFunds\" layoutX=\"473.0\" layoutY=\"31.0\" mnemonicParsing=\"false\" onMouseClicked=\"#addFundsShow\" style=\"-fx-background-color: rgb(238, 204, 255)rgb(238, 204, 255); -fx-background-radius: 30;\" text=\"Add Funds\" textFill=\"WHITE\" />\r\n                        <Text fill=\"WHITE\" layoutX=\"320.0\" layoutY=\"423.0\" strokeType=\"OUTSIDE\" strokeWidth=\"0.0\" text=\"Reviews\">\r\n                            <font>\r\n                                <Font size=\"24.0\" />\r\n                            </font>\r\n                        </Text>\r\n                        <Separator layoutX=\"261.0\" layoutY=\"394.0\" prefWidth=\"200.0\" />\r\n                        <Pane layoutX=\"446.0\" layoutY=\"65.0\" prefHeight=\"44.0\" prefWidth=\"200.0\">\r\n                            <children>\r\n                                <Text fx:id=\"balanceValue\" layoutX=\"70.0\" layoutY=\"29.0\" strokeType=\"OUTSIDE\" strokeWidth=\"0.0\" text=\"\" wrappingWidth=\"100.0\">\r\n                                    <font>\r\n                                        <Font name=\"System Bold\" size=\"12.0\" />\r\n                                    </font></Text>\r\n                                <Label fx:id=\"balanceText\" layoutX=\"0.0\" layoutY=\"14.0\" text=\"Balance: \" textFill=\"WHITE\">\r\n                                    <font>\r\n                                        <Font size=\"15.0\" />\r\n                                    </font>\r\n                                </Label>\r\n                                <Button fx:id=\"refreshBtn\" layoutX=\"170.0\" layoutY=\"10.0\" mnemonicParsing=\"false\" onMouseClicked=\"#updateUserBalance\" style=\"-fx-background-color: rgb(220,220,220); -fx-background-radius: 30;\">\r\n                                    <graphic>\r\n                                        <ImageView fitHeight=\"16.0\" fitWidth=\"16.0\">\r\n                                            <image>\r\n                                                <Image url=\"@../img/refresh.png\" />\r\n                                            </image>\r\n                                        </ImageView>\r\n                                    </graphic>\r\n                                </Button>\r\n                            </children>\r\n                        </Pane>\r\n                        <BorderPane fx:id=\"review\" layoutX=\"10.0\" layoutY=\"470.0\" prefHeight=\"200.0\" prefWidth=\"680.0\">\r\n                            <left>\r\n                                <Pane fx:id=\"prevReviews\" onMouseClicked=\"#prevReviews\" prefHeight=\"215.0\" prefWidth=\"50.0\" BorderPane.alignment=\"CENTER\">\r\n                                    <children>\r\n                                        <ImageView fitHeight=\"50.0\" fitWidth=\"50.0\" layoutX=\"-1.0\" layoutY=\"74.0\">\r\n                                            <image>\r\n                                                <Image url=\"@../img/prev.png\" />\r\n                                            </image>\r\n                                        </ImageView>\r\n                                    </children>\r\n                                </Pane>\r\n                            </left>\r\n                            <right>\r\n                                <Pane fx:id=\"nextReviews\" onMouseClicked=\"#nextReviews\" prefHeight=\"200.0\" prefWidth=\"50.0\" BorderPane.alignment=\"CENTER\">\r\n                                    <children>\r\n                                        <ImageView fitHeight=\"50.0\" fitWidth=\"50.0\" layoutX=\"-1.0\" layoutY=\"74.0\">\r\n                                            <image>\r\n                                                <Image url=\"@../img/next.png\" />\r\n                                            </image>\r\n                                        </ImageView>\r\n                                    </children>\r\n                                </Pane>\r\n                            </right>\r\n                        </BorderPane>\r\n                        <Pane fx:id=\"profileImage\" layoutX=\"79.0\" layoutY=\"23.0\" prefHeight=\"113.0\" prefWidth=\"161.0\" style=\"-fx-border-radius: 50; -fx-background-radius: 80;\" />\r\n                    </children>\r\n                </AnchorPane>\r\n            </items>\r\n        </SplitPane>\r\n    </children>\r\n</AnchorPane>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/resources/FXML/Profile.fxml b/src/main/resources/FXML/Profile.fxml
--- a/src/main/resources/FXML/Profile.fxml	(revision b0d1fe2501ac7556ddd47ebd9d2e2220d1bf8ff4)
+++ b/src/main/resources/FXML/Profile.fxml	(date 1644335853270)
@@ -26,8 +26,8 @@
                                 <Font size="24.0" />
                             </font>
                         </Text>
-                        <Button fx:id="followersButton" layoutX="429.0" layoutY="158.0" mnemonicParsing="false" onMouseClicked="#showUserFollowers" prefHeight="25.0" prefWidth="245.0" style="-fx-background-color: rgb(197, 197, 237)rgb(197, 197, 237); -fx-background-radius: 20;" text="Followers" textFill="#65626b" />
-                        <Button fx:id="followingButton" layoutX="429.0" layoutY="199.0" mnemonicParsing="false" onMouseClicked="#showUserFollowing" prefHeight="25.0" prefWidth="245.0" style="-fx-background-color: rgb(197, 197, 237)rgb(197, 197, 237) rgb(197, 197, 237)rgb(197, 197, 237); -fx-background-radius: 30;" text="Following" textFill="#65626b" />
+                        <Button fx:id="followersButton" layoutX="429.0" layoutY="158.0" mnemonicParsing="false" prefHeight="25.0" prefWidth="245.0" style="-fx-background-color: rgb(197, 197, 237)rgb(197, 197, 237); -fx-background-radius: 20;" text="Followers" textFill="#65626b" />
+                        <Button fx:id="followingButton" layoutX="429.0" layoutY="199.0" mnemonicParsing="false" prefHeight="25.0" prefWidth="245.0" style="-fx-background-color: rgb(197, 197, 237)rgb(197, 197, 237) rgb(197, 197, 237)rgb(197, 197, 237); -fx-background-radius: 30;" text="Following" textFill="#65626b" />
                         <Button fx:id="interestedInsertionsButton" layoutX="429.0" layoutY="238.0" mnemonicParsing="false" onMouseClicked="#showInsertionsLiked" prefHeight="25.0" prefWidth="245.0" style="-fx-background-color: rgb(197, 197, 237)rgb(197, 197, 237) rgb(197, 197, 237)rgb(197, 197, 237); -fx-background-radius: 30;" text="View insertion you are interested in" textFill="#65626b" />
                         <Button fx:id="insertionButton" layoutX="429.0" layoutY="279.0" mnemonicParsing="false" onMouseClicked="#showInsertions" prefHeight="25.0" prefWidth="245.0" style="-fx-background-color: rgb(197, 197, 237)rgb(197, 197, 237) rgb(197, 197, 237)rgb(197, 197, 237); -fx-background-radius: 30;" text="View insertion you published" textFill="#65626b" />
                         <GridPane fx:id="userInfo" layoutX="85.0" layoutY="147.0" prefHeight="180.0" prefWidth="309.0">
Index: src/main/java/it/unipi/dii/largescale/secondchance/controller/FollowController.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package main.java.it.unipi.dii.largescale.secondchance.controller;\r\n\r\nimport javafx.fxml.FXMLLoader;\r\nimport javafx.geometry.HPos;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.control.Label;\r\nimport javafx.scene.image.ImageView;\r\nimport javafx.scene.layout.*;\r\nimport javafx.stage.Stage;\r\nimport javafx.stage.StageStyle;\r\nimport main.java.it.unipi.dii.largescale.secondchance.connection.ConnectionMongoDB;\r\nimport main.java.it.unipi.dii.largescale.secondchance.utils.Utility;\r\nimport org.bson.Document;\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\n\r\npublic class FollowController {\r\n\r\n    public ArrayList<String> list;\r\n    public BorderPane bp;\r\n    public VBox box;\r\n    public Pane prev, next;\r\n    private int nPage = 1;\r\n    private int scrollPage;\r\n    String type_img;\r\n\r\n    public void initialize(ArrayList<String> users){\r\n\r\n        //System.out.println(\"User 0: \" + followingUsers.get(0));\r\n        type_img = \"user\";\r\n        list = users;\r\n        scrollPage = 0;\r\n        box = new VBox(20);\r\n\r\n        prev.setVisible(false);\r\n        prev.setDisable(true);\r\n\r\n\r\n        if (users.size() == 0) {\r\n            Utility.infoBox(\"This profile has not following\", \"Information\", \"No following!\");\r\n            return;\r\n        }\r\n        /*\r\n        for (int i = 0; i < users.size(); i++) {\r\n            Document user = ConnectionMongoDB.connMongo.findUserByUsername(users.get(i));\r\n            list.add(user);\r\n        }\r\n        */\r\n\r\n        show();\r\n    }\r\n\r\n    public void show() {\r\n\r\n        box.getChildren().clear();\r\n\r\n        //if there are more than k insertions enable next button\r\n        if (list.size() == scrollPage - 1) {\r\n            next.setDisable(false);\r\n            next.setVisible(true);\r\n        }\r\n        System.out.println(\"(show) INDEX: \" + scrollPage);\r\n\r\n        for (int i = 0; i < nPage && i < list.size(); i++)\r\n            addUser();\r\n\r\n        bp.setCenter(box);\r\n\r\n    }\r\n\r\n    private void addUser() {\r\n\r\n        String user = list.get(scrollPage);\r\n\r\n        HBox hb = new HBox();\r\n        VBox det = new VBox();\r\n\r\n        ImageView image = Utility.getGoodImage(\"./img/user.png\", 150, type_img);\r\n        Label username = new Label(\"Username: \" + list.get(scrollPage));\r\n        //Label city = new Label(\"City: \" + list.get(scrollPage).getString(\"city\"));\r\n\r\n        det.getChildren().add(username);\r\n        //det.getChildren().add(city);\r\n        hb.getChildren().add(image);\r\n        hb.getChildren().add(det);\r\n        box.getChildren().add(hb);\r\n\r\n        image.setOnMouseClicked(event->{\r\n                    try {\r\n                      showUserPage(user);\r\n                    } catch (Exception e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n        );\r\n\r\n        GridPane.setHalignment(image, HPos.LEFT);\r\n        GridPane.setHalignment(username, HPos.LEFT);\r\n        //GridPane.setHalignment(city, HPos.LEFT);\r\n\r\n        det.setStyle(\"-fx-padding: 0 100 0 50;\");\r\n        hb.setStyle(\r\n                \"-fx-padding: 20;\" +\r\n                        \" -fx-background-color: rgb(230, 230, 255);\");\r\n        box.setStyle(\r\n                \"-fx-hgap: 10;\" +\r\n                        \" -fx-vgap: 10;\" +\r\n                        \" -fx-max-height: 180;\" +\r\n                        \" -fx-min-width: 530;\" +\r\n                        \" -fx-max-width: 600;\");\r\n\r\n        scrollPage++;\r\n        System.out.println(\"(add) INDEX: \" + scrollPage);\r\n    }\r\n\r\n    public void prevPage() {\r\n\r\n        System.out.println(\"(prev) INDEX: \" + scrollPage);\r\n        box.getChildren().clear();\r\n        scrollPage = Utility.prevPage(scrollPage, nPage, prev);\r\n        if(scrollPage < list.size())\r\n        {\r\n            next.setDisable(false);\r\n            next.setVisible(true);\r\n        }\r\n        show();\r\n\r\n    }\r\n\r\n    public void nextPage() {\r\n\r\n        box.getChildren().clear();\r\n        System.out.println(\"(next) INDEX: \" + scrollPage);\r\n        if (scrollPage == list.size()) {\r\n            next.setDisable(true);\r\n            next.setVisible(false);\r\n        }\r\n        show();\r\n\r\n    }\r\n\r\n    private void showUserPage(String username) {\r\n\r\n        System.out.println(\"USERNAME show: \" + username);\r\n        try {\r\n            FXMLLoader loader = new FXMLLoader();\r\n            loader.setLocation(ProfileController.class.getResource(\"/FXML/Profile.fxml\"));\r\n\r\n            Stage stage = new Stage(StageStyle.DECORATED);\r\n            stage.setScene(new Scene(loader.load()));\r\n            ProfileController controller = loader.getController();\r\n            controller.initialize(username);\r\n            stage.show();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/it/unipi/dii/largescale/secondchance/controller/FollowController.java b/src/main/java/it/unipi/dii/largescale/secondchance/controller/FollowController.java
--- a/src/main/java/it/unipi/dii/largescale/secondchance/controller/FollowController.java	(revision b0d1fe2501ac7556ddd47ebd9d2e2220d1bf8ff4)
+++ b/src/main/java/it/unipi/dii/largescale/secondchance/controller/FollowController.java	(date 1644403099749)
@@ -1,14 +1,22 @@
 package main.java.it.unipi.dii.largescale.secondchance.controller;
 
+import javafx.collections.FXCollections;
+import javafx.collections.ObservableList;
 import javafx.fxml.FXMLLoader;
 import javafx.geometry.HPos;
+import javafx.geometry.Pos;
 import javafx.scene.Scene;
+import javafx.scene.control.Button;
 import javafx.scene.control.Label;
+import javafx.scene.control.ListView;
 import javafx.scene.image.ImageView;
 import javafx.scene.layout.*;
 import javafx.stage.Stage;
 import javafx.stage.StageStyle;
 import main.java.it.unipi.dii.largescale.secondchance.connection.ConnectionMongoDB;
+import main.java.it.unipi.dii.largescale.secondchance.connection.ConnectionNeo4jDB;
+import main.java.it.unipi.dii.largescale.secondchance.entity.User;
+import main.java.it.unipi.dii.largescale.secondchance.utils.Session;
 import main.java.it.unipi.dii.largescale.secondchance.utils.Utility;
 import org.bson.Document;
 import java.io.IOException;
@@ -20,13 +28,14 @@
     public BorderPane bp;
     public VBox box;
     public Pane prev, next;
-    private int nPage = 1;
+    private int nPage = 8;
     private int scrollPage;
     String type_img;
+    User userLogged;
 
     public void initialize(ArrayList<String> users){
 
-        //System.out.println("User 0: " + followingUsers.get(0));
+        userLogged = Session.getLoggedUser();
         type_img = "user";
         list = users;
         scrollPage = 0;
@@ -35,33 +44,25 @@
         prev.setVisible(false);
         prev.setDisable(true);
 
-
-        if (users.size() == 0) {
+ /*       if (users.size() == 0) {
             Utility.infoBox("This profile has not following", "Information", "No following!");
             return;
         }
-        /*
-        for (int i = 0; i < users.size(); i++) {
-            Document user = ConnectionMongoDB.connMongo.findUserByUsername(users.get(i));
-            list.add(user);
-        }
-        */
-
+*/
         show();
     }
 
     public void show() {
 
         box.getChildren().clear();
-
         //if there are more than k insertions enable next button
-        if (list.size() == scrollPage - 1) {
-            next.setDisable(false);
-            next.setVisible(true);
+        if (list.size() < nPage) {
+            next.setDisable(true);
+            next.setVisible(false);
         }
         System.out.println("(show) INDEX: " + scrollPage);
 
-        for (int i = 0; i < nPage && i < list.size(); i++)
+        for (int i = 0; i < nPage && scrollPage < list.size(); i++)
             addUser();
 
         bp.setCenter(box);
@@ -75,54 +76,67 @@
         HBox hb = new HBox();
         VBox det = new VBox();
 
-        ImageView image = Utility.getGoodImage("./img/user.png", 150, type_img);
-        Label username = new Label("Username: " + list.get(scrollPage));
-        //Label city = new Label("City: " + list.get(scrollPage).getString("city"));
+        Label username = new Label(list.get(scrollPage));
+        Button follow = new Button();
+
+        if(ConnectionNeo4jDB.connNeo.checkIfFollows(userLogged.getUsername(), user))
+            follow.setText("Unfollow");
+        else
+            follow.setText("Follow");
 
         det.getChildren().add(username);
-        //det.getChildren().add(city);
-        hb.getChildren().add(image);
         hb.getChildren().add(det);
+        hb.getChildren().add(follow);
         box.getChildren().add(hb);
 
-        image.setOnMouseClicked(event->{
-                    try {
-                      showUserPage(user);
-                    } catch (Exception e) {
-                        e.printStackTrace();
-                    }
-                }
-        );
+        follow.setOnMouseClicked(event -> {
+            String action = follow.getText();
+            ConnectionNeo4jDB.connNeo.followUnfollowButton(action, Session.getLoggedUser().getUsername(), user);
+            if(action.equals("Follow"))
+                follow.setText("Unfollow");
+            if(action.equals("Unfollow"))
+                follow.setText("Follow");
+        });
+
+        username.setOnMouseClicked(event -> {
+            try {
+                showUserPage(user);
+            } catch (Exception e) {
+                e.printStackTrace();
+            }
+        });
 
-        GridPane.setHalignment(image, HPos.LEFT);
-        GridPane.setHalignment(username, HPos.LEFT);
-        //GridPane.setHalignment(city, HPos.LEFT);
+        String cssLayout =
+                "-fx-background-color:  rgb(238, 204, 255)rgb(238, 204, 255);\n" +
+                        "-fx-background-radius: 30;\n" +
+                        "-fx-text-fill: rgb(255,255,255)";
 
-        det.setStyle("-fx-padding: 0 100 0 50;");
+        follow.setStyle(cssLayout);
+
+        det.setStyle("-fx-padding: 0 110 0 30;");
         hb.setStyle(
-                "-fx-padding: 20;" +
-                        " -fx-background-color: rgb(230, 230, 255);");
+                "-fx-padding: 7;" +
+                        " -fx-background-color: rgb(230, 230, 255);" );
         box.setStyle(
                 "-fx-hgap: 10;" +
                         " -fx-vgap: 10;" +
-                        " -fx-max-height: 180;" +
-                        " -fx-min-width: 530;" +
-                        " -fx-max-width: 600;");
-
+                        " -fx-max-height: 80;" +
+                        " -fx-min-width: 330;" +
+                        " -fx-max-width: 400;");
         scrollPage++;
-        System.out.println("(add) INDEX: " + scrollPage);
     }
 
     public void prevPage() {
 
-        System.out.println("(prev) INDEX: " + scrollPage);
         box.getChildren().clear();
         scrollPage = Utility.prevPage(scrollPage, nPage, prev);
-        if(scrollPage < list.size())
+
+        if(scrollPage  < list.size())
         {
             next.setDisable(false);
             next.setVisible(true);
         }
+
         show();
 
     }
@@ -130,22 +144,23 @@
     public void nextPage() {
 
         box.getChildren().clear();
-        System.out.println("(next) INDEX: " + scrollPage);
-        if (scrollPage == list.size()) {
+
+        if (scrollPage + nPage >= list.size()) {
             next.setDisable(true);
             next.setVisible(false);
         }
+        prev.setVisible(true);
+        prev.setDisable(false);
+
         show();
 
     }
 
     private void showUserPage(String username) {
 
-        System.out.println("USERNAME show: " + username);
         try {
             FXMLLoader loader = new FXMLLoader();
             loader.setLocation(ProfileController.class.getResource("/FXML/Profile.fxml"));
-
             Stage stage = new Stage(StageStyle.DECORATED);
             stage.setScene(new Scene(loader.load()));
             ProfileController controller = loader.getController();
Index: src/main/resources/FXML/FollowPage.fxml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n\r\n<?import javafx.scene.image.Image?>\r\n<?import javafx.scene.image.ImageView?>\r\n<?import javafx.scene.layout.AnchorPane?>\r\n<?import javafx.scene.layout.BorderPane?>\r\n<?import javafx.scene.layout.Pane?>\r\n<?import javafx.scene.text.Text?>\r\n\r\n<AnchorPane prefHeight=\"400.0\" prefWidth=\"600.0\" style=\"-fx-background-color: rgb(70,130,180) rgb(70,130,180);\" xmlns=\"http://javafx.com/javafx/17\" xmlns:fx=\"http://javafx.com/fxml/1\" fx:controller=\"main.java.it.unipi.dii.largescale.secondchance.controller.FollowController\">\r\n    <children>\r\n        <Text layoutX=\"259.0\" layoutY=\"39.0\" strokeType=\"OUTSIDE\" strokeWidth=\"0.0\" text=\"Followers Page\" />\r\n        <BorderPane fx:id=\"bp\" layoutX=\"31.0\" layoutY=\"52.0\" prefHeight=\"297.0\" prefWidth=\"538.0\" style=\"-fx-background-color: rgb(70,130,180) rgb(70,130,180);\">\r\n            <left>\r\n                <Pane fx:id=\"prev\" onMouseClicked=\"#prevPage\" prefHeight=\"297.0\" prefWidth=\"80.0\" BorderPane.alignment=\"CENTER\">\r\n                    <children>\r\n                        <ImageView fitHeight=\"50.0\" fitWidth=\"50.0\" layoutX=\"15.0\" layoutY=\"179.0\">\r\n                            <image>\r\n                                <Image url=\"@../img/prev.png\" />\r\n                            </image>\r\n                        </ImageView>\r\n                    </children>\r\n                </Pane>\r\n            </left>\r\n            <right>\r\n                <Pane fx:id=\"next\" onMouseClicked=\"#nextPage\" prefHeight=\"297.0\" prefWidth=\"80.0\" BorderPane.alignment=\"CENTER\">\r\n                    <children>\r\n                        <ImageView fitHeight=\"50.0\" fitWidth=\"50.0\" layoutX=\"15.0\" layoutY=\"182.0\">\r\n                            <image>\r\n                                <Image url=\"@../img/next.png\" />\r\n                            </image>\r\n                        </ImageView>\r\n                    </children>\r\n                </Pane>\r\n            </right>\r\n        </BorderPane>\r\n    </children>\r\n</AnchorPane>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/resources/FXML/FollowPage.fxml b/src/main/resources/FXML/FollowPage.fxml
--- a/src/main/resources/FXML/FollowPage.fxml	(revision b0d1fe2501ac7556ddd47ebd9d2e2220d1bf8ff4)
+++ b/src/main/resources/FXML/FollowPage.fxml	(date 1644398412774)
@@ -1,5 +1,9 @@
 <?xml version="1.0" encoding="UTF-8"?>
 
+<?import java.lang.*?>
+<?import javafx.scene.image.*?>
+<?import javafx.scene.layout.*?>
+<?import javafx.scene.text.*?>
 <?import javafx.scene.image.Image?>
 <?import javafx.scene.image.ImageView?>
 <?import javafx.scene.layout.AnchorPane?>
@@ -7,9 +11,12 @@
 <?import javafx.scene.layout.Pane?>
 <?import javafx.scene.text.Text?>
 
-<AnchorPane prefHeight="400.0" prefWidth="600.0" style="-fx-background-color: rgb(70,130,180) rgb(70,130,180);" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="main.java.it.unipi.dii.largescale.secondchance.controller.FollowController">
+<AnchorPane prefHeight="550.0" prefWidth="600.0" style="-fx-background-color: rgb(70,130,180) rgb(70,130,180);" xmlns="http://javafx.com/javafx/8" xmlns:fx="http://javafx.com/fxml/1" fx:controller="main.java.it.unipi.dii.largescale.secondchance.controller.FollowController">
     <children>
-        <Text layoutX="259.0" layoutY="39.0" strokeType="OUTSIDE" strokeWidth="0.0" text="Followers Page" />
+        <Text fill="WHITE" layoutX="271.0" layoutY="39.0" strokeType="OUTSIDE" strokeWidth="0.0" text="Followers Page">
+         <font>
+            <Font size="16.0" />
+         </font></Text>
         <BorderPane fx:id="bp" layoutX="31.0" layoutY="52.0" prefHeight="297.0" prefWidth="538.0" style="-fx-background-color: rgb(70,130,180) rgb(70,130,180);">
             <left>
                 <Pane fx:id="prev" onMouseClicked="#prevPage" prefHeight="297.0" prefWidth="80.0" BorderPane.alignment="CENTER">
